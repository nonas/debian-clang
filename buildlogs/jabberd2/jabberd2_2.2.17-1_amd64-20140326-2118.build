sbuild (Debian sbuild) 0.64.1 (13 Oct 2013) on core.localdomain

╔══════════════════════════════════════════════════════════════════════════════╗
║ jabberd2 2.2.17-1 (amd64)                                  26 Mar 2014 21:18 ║
╚══════════════════════════════════════════════════════════════════════════════╝

Package: jabberd2
Version: 2.2.17-1
Source Version: 2.2.17-1
Distribution: sid
Machine Architecture: amd64
Host Architecture: amd64
Build Architecture: amd64

I: NOTICE: Log filtering will replace 'build/jabberd2-JP_Mzs/jabberd2-2.2.17' with '«PKGBUILDDIR»'
I: NOTICE: Log filtering will replace 'build/jabberd2-JP_Mzs' with '«BUILDDIR»'
I: NOTICE: Log filtering will replace 'var/lib/schroot/mount/sid-amd64-sbuild-e8c0692c-cc34-44cb-81d1-6be33f8be5fe' with '«CHROOT»'

┌──────────────────────────────────────────────────────────────────────────────┐
│ Fetch source files                                                           │
└──────────────────────────────────────────────────────────────────────────────┘


Local sources
─────────────

jabberd2_2.2.17-1.dsc exists in .; copying to chroot

Check arch
──────────

Merged Build-Depends: build-essential, fakeroot
Filtered Build-Depends: build-essential, fakeroot
dpkg-deb: building package `sbuild-build-depends-core-dummy' in `/«BUILDDIR»/resolver-t9sOKm/apt_archive/sbuild-build-depends-core-dummy.deb'.
OK
Reading package lists...

┌──────────────────────────────────────────────────────────────────────────────┐
│ Install core build dependencies (apt-based resolver)                         │
└──────────────────────────────────────────────────────────────────────────────┘

Installing build dependencies
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  sbuild-build-depends-core-dummy
debconf: delaying package configuration, since apt-utils is not installed
0 upgraded, 1 newly installed, 0 to remove and 16 not upgraded.
Need to get 0 B/822 B of archives.
After this operation, 0 B of additional disk space will be used.
Selecting previously unselected package sbuild-build-depends-core-dummy.
(Reading database ... 13265 files and directories currently installed.)
Preparing to unpack .../sbuild-build-depends-core-dummy.deb ...
Unpacking sbuild-build-depends-core-dummy (0.invalid.0) ...
Setting up sbuild-build-depends-core-dummy (0.invalid.0) ...
Merged Build-Depends: base-files, base-passwd, bash, bsdutils, coreutils, dash, debianutils, diffutils, dpkg, e2fsprogs, findutils, grep, gzip, hostname, libc-bin, login, mount, ncurses-base, ncurses-bin, perl-base, sed, sysvinit, sysvinit-utils, tar, util-linux, libc6-dev | libc-dev, gcc (>= 4:4.4.3), g++ (>= 4:4.4.3), make, dpkg-dev (>= 1.13.5), debhelper (>= 9), autotools-dev, automake, libtool, libssl-dev, libgsasl7-dev (>= 0.2.27), libdb-dev, libpam0g-dev, libmysqlclient15-dev, libpq-dev, libldap2-dev, libsqlite3-dev, libidn11-dev, libexpat1-dev, libudns-dev, dh-autoreconf
Filtered Build-Depends: base-files, base-passwd, bash, bsdutils, coreutils, dash, debianutils, diffutils, dpkg, e2fsprogs, findutils, grep, gzip, hostname, libc-bin, login, mount, ncurses-base, ncurses-bin, perl-base, sed, sysvinit, sysvinit-utils, tar, util-linux, libc6-dev, gcc (>= 4:4.4.3), g++ (>= 4:4.4.3), make, dpkg-dev (>= 1.13.5), debhelper (>= 9), autotools-dev, automake, libtool, libssl-dev, libgsasl7-dev (>= 0.2.27), libdb-dev, libpam0g-dev, libmysqlclient15-dev, libpq-dev, libldap2-dev, libsqlite3-dev, libidn11-dev, libexpat1-dev, libudns-dev, dh-autoreconf
dpkg-deb: building package `sbuild-build-depends-jabberd2-dummy' in `/«BUILDDIR»/resolver-E9jdKz/apt_archive/sbuild-build-depends-jabberd2-dummy.deb'.
OK
Reading package lists...

┌──────────────────────────────────────────────────────────────────────────────┐
│ Install jabberd2 build dependencies (apt-based resolver)                     │
└──────────────────────────────────────────────────────────────────────────────┘

Installing build dependencies
Reading package lists...
Building dependency tree...
Reading state information...
The following extra packages will be installed:
  autoconf automake autopoint autotools-dev bsdmainutils comerr-dev debhelper
  dh-autoreconf gettext gettext-base groff-base intltool-debian krb5-multidev
  libasprintf0c2 libcroco3 libdb-dev libdb5.3-dev libexpat1-dev libgcrypt11
  libglib2.0-0 libgnutls26 libgpg-error0 libgsasl7 libgsasl7-dev
  libgssapi-krb5-2 libgssrpc4 libidn11 libidn11-dev libk5crypto3
  libkadm5clnt-mit9 libkadm5srv-mit9 libkdb5-7 libkeyutils1 libkrb5-3
  libkrb5-dev libkrb5support0 libldap-2.4-2 libldap2-dev libmysqlclient-dev
  libmysqlclient18 libntlm0 libntlm0-dev libp11-kit0 libpam0g-dev libpopt0
  libpq-dev libpq5 libsasl2-2 libsasl2-modules-db libsigsegv2 libsqlite3-dev
  libssl-dev libtasn1-6 libtool libudns-dev libudns0 libunistring0 libxml2 m4
  man-db mysql-common pkg-config po-debconf zlib1g-dev
Suggested packages:
  autoconf2.13 autoconf-archive gnu-standards autoconf-doc wamerican wordlist
  whois vacation doc-base dh-make gettext-doc groff krb5-doc db5.3-doc
  rng-tools krb5-user postgresql-doc-9.3 sqlite3-doc libtool-doc automaken
  gfortran fortran95-compiler gcj-jdk less www-browser libmail-box-perl
Recommended packages:
  curl wget lynx-cur libasprintf-dev libgettextpo-dev libglib2.0-data
  shared-mime-info krb5-locales libsasl2-modules libssl-doc libltdl-dev
  xml-core libmail-sendmail-perl
The following NEW packages will be installed:
  autoconf automake autopoint autotools-dev bsdmainutils comerr-dev debhelper
  dh-autoreconf gettext gettext-base groff-base intltool-debian krb5-multidev
  libasprintf0c2 libcroco3 libdb-dev libdb5.3-dev libexpat1-dev libgcrypt11
  libglib2.0-0 libgnutls26 libgpg-error0 libgsasl7 libgsasl7-dev
  libgssapi-krb5-2 libgssrpc4 libidn11 libidn11-dev libk5crypto3
  libkadm5clnt-mit9 libkadm5srv-mit9 libkdb5-7 libkeyutils1 libkrb5-3
  libkrb5-dev libkrb5support0 libldap-2.4-2 libldap2-dev libmysqlclient-dev
  libmysqlclient18 libntlm0 libntlm0-dev libp11-kit0 libpam0g-dev libpopt0
  libpq-dev libpq5 libsasl2-2 libsasl2-modules-db libsigsegv2 libsqlite3-dev
  libssl-dev libtasn1-6 libtool libudns-dev libudns0 libunistring0 libxml2 m4
  man-db mysql-common pkg-config po-debconf
  sbuild-build-depends-jabberd2-dummy zlib1g-dev
0 upgraded, 65 newly installed, 0 to remove and 16 not upgraded.
Need to get 19.9 MB/19.9 MB of archives.
After this operation, 64.7 MB of additional disk space will be used.
Get:1 http://debian.proxad.net/debian/ sid/main libpopt0 amd64 1.16-8 [48.9 kB]
Get:2 http://debian.proxad.net/debian/ sid/main groff-base amd64 1.22.2-5 [1043 kB]
Get:3 http://debian.proxad.net/debian/ sid/main bsdmainutils amd64 9.0.5 [211 kB]
Get:4 http://debian.proxad.net/debian/ sid/main man-db amd64 2.6.6-1 [990 kB]
Get:5 http://debian.proxad.net/debian/ sid/main libasprintf0c2 amd64 0.18.3.2-1 [29.2 kB]
Get:6 http://debian.proxad.net/debian/ sid/main libgpg-error0 amd64 1.12-0.2 [56.5 kB]
Get:7 http://debian.proxad.net/debian/ sid/main libgcrypt11 amd64 1.5.3-4 [250 kB]
Get:8 http://debian.proxad.net/debian/ sid/main libp11-kit0 amd64 0.20.2-4 [80.3 kB]
Get:9 http://debian.proxad.net/debian/ sid/main libtasn1-6 amd64 3.4-3 [48.8 kB]
Get:10 http://debian.proxad.net/debian/ sid/main libgnutls26 amd64 2.12.23-13 [530 kB]
Get:11 http://debian.proxad.net/debian/ sid/main libkeyutils1 amd64 1.5.6-1 [8758 B]
Get:12 http://debian.proxad.net/debian/ sid/main libkrb5support0 amd64 1.12.1+dfsg-1 [56.3 kB]
Get:13 http://debian.proxad.net/debian/ sid/main libk5crypto3 amd64 1.12.1+dfsg-1 [109 kB]
Get:14 http://debian.proxad.net/debian/ sid/main libkrb5-3 amd64 1.12.1+dfsg-1 [296 kB]
Get:15 http://debian.proxad.net/debian/ sid/main libgssapi-krb5-2 amd64 1.12.1+dfsg-1 [143 kB]
Get:16 http://debian.proxad.net/debian/ sid/main libgssrpc4 amd64 1.12.1+dfsg-1 [82.7 kB]
Get:17 http://debian.proxad.net/debian/ sid/main libidn11 amd64 1.28-1 [183 kB]
Get:18 http://debian.proxad.net/debian/ sid/main libkadm5clnt-mit9 amd64 1.12.1+dfsg-1 [65.6 kB]
Get:19 http://debian.proxad.net/debian/ sid/main libkdb5-7 amd64 1.12.1+dfsg-1 [65.5 kB]
Get:20 http://debian.proxad.net/debian/ sid/main libkadm5srv-mit9 amd64 1.12.1+dfsg-1 [79.8 kB]
Get:21 http://debian.proxad.net/debian/ sid/main libsasl2-modules-db amd64 2.1.26.dfsg1-9 [66.4 kB]
Get:22 http://debian.proxad.net/debian/ sid/main libsasl2-2 amd64 2.1.26.dfsg1-9 [103 kB]
Get:23 http://debian.proxad.net/debian/ sid/main libldap-2.4-2 amd64 2.4.39-1 [212 kB]
Get:24 http://debian.proxad.net/debian/ sid/main libxml2 amd64 2.9.1+dfsg1-3 [791 kB]
Get:25 http://debian.proxad.net/debian/ sid/main libglib2.0-0 amd64 2.38.2-5 [2231 kB]
Get:26 http://debian.proxad.net/debian/ sid/main libcroco3 amd64 0.6.8-2 [133 kB]
Get:27 http://debian.proxad.net/debian/ sid/main mysql-common all 5.5.35+dfsg-2 [84.8 kB]
Get:28 http://debian.proxad.net/debian/ sid/main libmysqlclient18 amd64 5.5.35+dfsg-2 [663 kB]
Get:29 http://debian.proxad.net/debian/ sid/main libntlm0 amd64 1.4-1 [22.0 kB]
Get:30 http://debian.proxad.net/debian/ sid/main libsigsegv2 amd64 2.10-2 [29.8 kB]
Get:31 http://debian.proxad.net/debian/ sid/main libudns0 amd64 0.4-1 [28.5 kB]
Get:32 http://debian.proxad.net/debian/ sid/main libunistring0 amd64 0.9.3-5 [434 kB]
Get:33 http://debian.proxad.net/debian/ sid/main gettext-base amd64 0.18.3.2-1 [116 kB]
Get:34 http://debian.proxad.net/debian/ sid/main m4 amd64 1.4.17-3 [254 kB]
Get:35 http://debian.proxad.net/debian/ sid/main autoconf all 2.69-5 [340 kB]
Get:36 http://debian.proxad.net/debian/ sid/main autotools-dev all 20130810.1 [69.6 kB]
Get:37 http://debian.proxad.net/debian/ sid/main automake all 1:1.14.1-3 [725 kB]
Get:38 http://debian.proxad.net/debian/ sid/main autopoint all 0.18.3.2-1 [393 kB]
Get:39 http://debian.proxad.net/debian/ sid/main gettext amd64 0.18.3.2-1 [1203 kB]
Get:40 http://debian.proxad.net/debian/ sid/main intltool-debian all 0.35.0+20060710.1 [30.8 kB]
Get:41 http://debian.proxad.net/debian/ sid/main po-debconf all 1.0.16+nmu2 [224 kB]
Get:42 http://debian.proxad.net/debian/ sid/main debhelper all 9.20140228 [691 kB]
Get:43 http://debian.proxad.net/debian/ sid/main libtool amd64 2.4.2-1.7 [505 kB]
Get:44 http://debian.proxad.net/debian/ sid/main dh-autoreconf all 9 [15.5 kB]
Get:45 http://debian.proxad.net/debian/ sid/main comerr-dev amd64 2.1-1.42.9-3 [38.3 kB]
Get:46 http://debian.proxad.net/debian/ sid/main krb5-multidev amd64 1.12.1+dfsg-1 [140 kB]
Get:47 http://debian.proxad.net/debian/ sid/main libexpat1-dev amd64 2.1.0-4 [223 kB]
Get:48 http://debian.proxad.net/debian/ sid/main libgsasl7 amd64 1.8.0-2 [232 kB]
Get:49 http://debian.proxad.net/debian/ sid/main pkg-config amd64 0.26-1 [59.5 kB]
Get:50 http://debian.proxad.net/debian/ sid/main libidn11-dev amd64 1.28-1 [665 kB]
Get:51 http://debian.proxad.net/debian/ sid/main libntlm0-dev amd64 1.4-1 [26.8 kB]
Get:52 http://debian.proxad.net/debian/ sid/main libkrb5-dev amd64 1.12.1+dfsg-1 [43.3 kB]
Get:53 http://debian.proxad.net/debian/ sid/main libgsasl7-dev amd64 1.8.0-2 [299 kB]
Get:54 http://debian.proxad.net/debian/ sid/main zlib1g-dev amd64 1:1.2.8.dfsg-1 [217 kB]
Get:55 http://debian.proxad.net/debian/ sid/main libmysqlclient-dev amd64 5.5.35+dfsg-2 [933 kB]
Get:56 http://debian.proxad.net/debian/ sid/main libpam0g-dev amd64 1.1.8-2 [182 kB]
Get:57 http://debian.proxad.net/debian/ sid/main libpq5 amd64 9.3.4-1 [125 kB]
Get:58 http://debian.proxad.net/debian/ sid/main libssl-dev amd64 1.0.1f-1 [1243 kB]
Get:59 http://debian.proxad.net/debian/ sid/main libpq-dev amd64 9.3.4-1 [163 kB]
Get:60 http://debian.proxad.net/debian/ sid/main libsqlite3-dev amd64 3.8.4.1-1 [506 kB]
Get:61 http://debian.proxad.net/debian/ sid/main libudns-dev amd64 0.4-1 [60.8 kB]
Get:62 http://debian.proxad.net/debian/ sid/main libdb5.3-dev amd64 5.3.28-3 [717 kB]
Get:63 http://debian.proxad.net/debian/ sid/main libdb-dev amd64 5.3.0 [2276 B]
Get:64 http://debian.proxad.net/debian/ sid/main libldap2-dev amd64 2.4.39-1 [317 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 19.9 MB in 0s (53.3 MB/s)
Selecting previously unselected package libpopt0:amd64.
(Reading database ... 13265 files and directories currently installed.)
Preparing to unpack .../libpopt0_1.16-8_amd64.deb ...
Unpacking libpopt0:amd64 (1.16-8) ...
Selecting previously unselected package groff-base.
Preparing to unpack .../groff-base_1.22.2-5_amd64.deb ...
Unpacking groff-base (1.22.2-5) ...
Selecting previously unselected package bsdmainutils.
Preparing to unpack .../bsdmainutils_9.0.5_amd64.deb ...
Unpacking bsdmainutils (9.0.5) ...
Selecting previously unselected package man-db.
Preparing to unpack .../man-db_2.6.6-1_amd64.deb ...
Unpacking man-db (2.6.6-1) ...
Selecting previously unselected package libasprintf0c2:amd64.
Preparing to unpack .../libasprintf0c2_0.18.3.2-1_amd64.deb ...
Unpacking libasprintf0c2:amd64 (0.18.3.2-1) ...
Selecting previously unselected package libgpg-error0:amd64.
Preparing to unpack .../libgpg-error0_1.12-0.2_amd64.deb ...
Unpacking libgpg-error0:amd64 (1.12-0.2) ...
Selecting previously unselected package libgcrypt11:amd64.
Preparing to unpack .../libgcrypt11_1.5.3-4_amd64.deb ...
Unpacking libgcrypt11:amd64 (1.5.3-4) ...
Selecting previously unselected package libp11-kit0:amd64.
Preparing to unpack .../libp11-kit0_0.20.2-4_amd64.deb ...
Unpacking libp11-kit0:amd64 (0.20.2-4) ...
Selecting previously unselected package libtasn1-6:amd64.
Preparing to unpack .../libtasn1-6_3.4-3_amd64.deb ...
Unpacking libtasn1-6:amd64 (3.4-3) ...
Selecting previously unselected package libgnutls26:amd64.
Preparing to unpack .../libgnutls26_2.12.23-13_amd64.deb ...
Unpacking libgnutls26:amd64 (2.12.23-13) ...
Selecting previously unselected package libkeyutils1:amd64.
Preparing to unpack .../libkeyutils1_1.5.6-1_amd64.deb ...
Unpacking libkeyutils1:amd64 (1.5.6-1) ...
Selecting previously unselected package libkrb5support0:amd64.
Preparing to unpack .../libkrb5support0_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkrb5support0:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libk5crypto3:amd64.
Preparing to unpack .../libk5crypto3_1.12.1+dfsg-1_amd64.deb ...
Unpacking libk5crypto3:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libkrb5-3:amd64.
Preparing to unpack .../libkrb5-3_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkrb5-3:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libgssapi-krb5-2:amd64.
Preparing to unpack .../libgssapi-krb5-2_1.12.1+dfsg-1_amd64.deb ...
Unpacking libgssapi-krb5-2:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libgssrpc4:amd64.
Preparing to unpack .../libgssrpc4_1.12.1+dfsg-1_amd64.deb ...
Unpacking libgssrpc4:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libidn11:amd64.
Preparing to unpack .../libidn11_1.28-1_amd64.deb ...
Unpacking libidn11:amd64 (1.28-1) ...
Selecting previously unselected package libkadm5clnt-mit9:amd64.
Preparing to unpack .../libkadm5clnt-mit9_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkadm5clnt-mit9:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libkdb5-7:amd64.
Preparing to unpack .../libkdb5-7_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkdb5-7:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libkadm5srv-mit9:amd64.
Preparing to unpack .../libkadm5srv-mit9_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkadm5srv-mit9:amd64 (1.12.1+dfsg-1) ...
Selecting previously unselected package libsasl2-modules-db:amd64.
Preparing to unpack .../libsasl2-modules-db_2.1.26.dfsg1-9_amd64.deb ...
Unpacking libsasl2-modules-db:amd64 (2.1.26.dfsg1-9) ...
Selecting previously unselected package libsasl2-2:amd64.
Preparing to unpack .../libsasl2-2_2.1.26.dfsg1-9_amd64.deb ...
Unpacking libsasl2-2:amd64 (2.1.26.dfsg1-9) ...
Selecting previously unselected package libldap-2.4-2:amd64.
Preparing to unpack .../libldap-2.4-2_2.4.39-1_amd64.deb ...
Unpacking libldap-2.4-2:amd64 (2.4.39-1) ...
Selecting previously unselected package libxml2:amd64.
Preparing to unpack .../libxml2_2.9.1+dfsg1-3_amd64.deb ...
Unpacking libxml2:amd64 (2.9.1+dfsg1-3) ...
Selecting previously unselected package libglib2.0-0:amd64.
Preparing to unpack .../libglib2.0-0_2.38.2-5_amd64.deb ...
Unpacking libglib2.0-0:amd64 (2.38.2-5) ...
Selecting previously unselected package libcroco3:amd64.
Preparing to unpack .../libcroco3_0.6.8-2_amd64.deb ...
Unpacking libcroco3:amd64 (0.6.8-2) ...
Selecting previously unselected package mysql-common.
Preparing to unpack .../mysql-common_5.5.35+dfsg-2_all.deb ...
Unpacking mysql-common (5.5.35+dfsg-2) ...
Selecting previously unselected package libmysqlclient18:amd64.
Preparing to unpack .../libmysqlclient18_5.5.35+dfsg-2_amd64.deb ...
Unpacking libmysqlclient18:amd64 (5.5.35+dfsg-2) ...
Selecting previously unselected package libntlm0:amd64.
Preparing to unpack .../libntlm0_1.4-1_amd64.deb ...
Unpacking libntlm0:amd64 (1.4-1) ...
Selecting previously unselected package libsigsegv2:amd64.
Preparing to unpack .../libsigsegv2_2.10-2_amd64.deb ...
Unpacking libsigsegv2:amd64 (2.10-2) ...
Selecting previously unselected package libudns0:amd64.
Preparing to unpack .../libudns0_0.4-1_amd64.deb ...
Unpacking libudns0:amd64 (0.4-1) ...
Selecting previously unselected package libunistring0:amd64.
Preparing to unpack .../libunistring0_0.9.3-5_amd64.deb ...
Unpacking libunistring0:amd64 (0.9.3-5) ...
Selecting previously unselected package gettext-base.
Preparing to unpack .../gettext-base_0.18.3.2-1_amd64.deb ...
Unpacking gettext-base (0.18.3.2-1) ...
Selecting previously unselected package m4.
Preparing to unpack .../archives/m4_1.4.17-3_amd64.deb ...
Unpacking m4 (1.4.17-3) ...
Selecting previously unselected package autoconf.
Preparing to unpack .../autoconf_2.69-5_all.deb ...
Unpacking autoconf (2.69-5) ...
Selecting previously unselected package autotools-dev.
Preparing to unpack .../autotools-dev_20130810.1_all.deb ...
Unpacking autotools-dev (20130810.1) ...
Selecting previously unselected package automake.
Preparing to unpack .../automake_1%3a1.14.1-3_all.deb ...
Unpacking automake (1:1.14.1-3) ...
Selecting previously unselected package autopoint.
Preparing to unpack .../autopoint_0.18.3.2-1_all.deb ...
Unpacking autopoint (0.18.3.2-1) ...
Selecting previously unselected package gettext.
Preparing to unpack .../gettext_0.18.3.2-1_amd64.deb ...
Unpacking gettext (0.18.3.2-1) ...
Selecting previously unselected package intltool-debian.
Preparing to unpack .../intltool-debian_0.35.0+20060710.1_all.deb ...
Unpacking intltool-debian (0.35.0+20060710.1) ...
Selecting previously unselected package po-debconf.
Preparing to unpack .../po-debconf_1.0.16+nmu2_all.deb ...
Unpacking po-debconf (1.0.16+nmu2) ...
Selecting previously unselected package debhelper.
Preparing to unpack .../debhelper_9.20140228_all.deb ...
Unpacking debhelper (9.20140228) ...
Selecting previously unselected package libtool.
Preparing to unpack .../libtool_2.4.2-1.7_amd64.deb ...
Unpacking libtool (2.4.2-1.7) ...
Selecting previously unselected package dh-autoreconf.
Preparing to unpack .../dh-autoreconf_9_all.deb ...
Unpacking dh-autoreconf (9) ...
Selecting previously unselected package comerr-dev.
Preparing to unpack .../comerr-dev_2.1-1.42.9-3_amd64.deb ...
Unpacking comerr-dev (2.1-1.42.9-3) ...
Selecting previously unselected package krb5-multidev.
Preparing to unpack .../krb5-multidev_1.12.1+dfsg-1_amd64.deb ...
Unpacking krb5-multidev (1.12.1+dfsg-1) ...
Selecting previously unselected package libexpat1-dev:amd64.
Preparing to unpack .../libexpat1-dev_2.1.0-4_amd64.deb ...
Unpacking libexpat1-dev:amd64 (2.1.0-4) ...
Selecting previously unselected package libgsasl7.
Preparing to unpack .../libgsasl7_1.8.0-2_amd64.deb ...
Unpacking libgsasl7 (1.8.0-2) ...
Selecting previously unselected package pkg-config.
Preparing to unpack .../pkg-config_0.26-1_amd64.deb ...
Unpacking pkg-config (0.26-1) ...
Selecting previously unselected package libidn11-dev.
Preparing to unpack .../libidn11-dev_1.28-1_amd64.deb ...
Unpacking libidn11-dev (1.28-1) ...
Selecting previously unselected package libntlm0-dev.
Preparing to unpack .../libntlm0-dev_1.4-1_amd64.deb ...
Unpacking libntlm0-dev (1.4-1) ...
Selecting previously unselected package libkrb5-dev.
Preparing to unpack .../libkrb5-dev_1.12.1+dfsg-1_amd64.deb ...
Unpacking libkrb5-dev (1.12.1+dfsg-1) ...
Selecting previously unselected package libgsasl7-dev.
Preparing to unpack .../libgsasl7-dev_1.8.0-2_amd64.deb ...
Unpacking libgsasl7-dev (1.8.0-2) ...
Selecting previously unselected package zlib1g-dev:amd64.
Preparing to unpack .../zlib1g-dev_1%3a1.2.8.dfsg-1_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.8.dfsg-1) ...
Selecting previously unselected package libmysqlclient-dev.
Preparing to unpack .../libmysqlclient-dev_5.5.35+dfsg-2_amd64.deb ...
Unpacking libmysqlclient-dev (5.5.35+dfsg-2) ...
Selecting previously unselected package libpam0g-dev:amd64.
Preparing to unpack .../libpam0g-dev_1.1.8-2_amd64.deb ...
Unpacking libpam0g-dev:amd64 (1.1.8-2) ...
Selecting previously unselected package libpq5.
Preparing to unpack .../libpq5_9.3.4-1_amd64.deb ...
Unpacking libpq5 (9.3.4-1) ...
Selecting previously unselected package libssl-dev:amd64.
Preparing to unpack .../libssl-dev_1.0.1f-1_amd64.deb ...
Unpacking libssl-dev:amd64 (1.0.1f-1) ...
Selecting previously unselected package libpq-dev.
Preparing to unpack .../libpq-dev_9.3.4-1_amd64.deb ...
Unpacking libpq-dev (9.3.4-1) ...
Selecting previously unselected package libsqlite3-dev:amd64.
Preparing to unpack .../libsqlite3-dev_3.8.4.1-1_amd64.deb ...
Unpacking libsqlite3-dev:amd64 (3.8.4.1-1) ...
Selecting previously unselected package libudns-dev.
Preparing to unpack .../libudns-dev_0.4-1_amd64.deb ...
Unpacking libudns-dev (0.4-1) ...
Selecting previously unselected package libdb5.3-dev.
Preparing to unpack .../libdb5.3-dev_5.3.28-3_amd64.deb ...
Unpacking libdb5.3-dev (5.3.28-3) ...
Selecting previously unselected package libdb-dev:amd64.
Preparing to unpack .../libdb-dev_5.3.0_amd64.deb ...
Unpacking libdb-dev:amd64 (5.3.0) ...
Selecting previously unselected package libldap2-dev:amd64.
Preparing to unpack .../libldap2-dev_2.4.39-1_amd64.deb ...
Unpacking libldap2-dev:amd64 (2.4.39-1) ...
Selecting previously unselected package sbuild-build-depends-jabberd2-dummy.
Preparing to unpack .../sbuild-build-depends-jabberd2-dummy.deb ...
Unpacking sbuild-build-depends-jabberd2-dummy (0.invalid.0) ...
Processing triggers for mime-support (3.54) ...
Setting up libpopt0:amd64 (1.16-8) ...
Setting up groff-base (1.22.2-5) ...
Setting up bsdmainutils (9.0.5) ...
update-alternatives: using /usr/bin/bsd-write to provide /usr/bin/write (write) in auto mode
update-alternatives: using /usr/bin/bsd-from to provide /usr/bin/from (from) in auto mode
Setting up man-db (2.6.6-1) ...
Not building database; man-db/auto-update is not 'true'.
Setting up libasprintf0c2:amd64 (0.18.3.2-1) ...
Setting up libgpg-error0:amd64 (1.12-0.2) ...
Setting up libgcrypt11:amd64 (1.5.3-4) ...
Setting up libp11-kit0:amd64 (0.20.2-4) ...
Setting up libtasn1-6:amd64 (3.4-3) ...
Setting up libgnutls26:amd64 (2.12.23-13) ...
Setting up libkeyutils1:amd64 (1.5.6-1) ...
Setting up libkrb5support0:amd64 (1.12.1+dfsg-1) ...
Setting up libk5crypto3:amd64 (1.12.1+dfsg-1) ...
Setting up libkrb5-3:amd64 (1.12.1+dfsg-1) ...
Setting up libgssapi-krb5-2:amd64 (1.12.1+dfsg-1) ...
Setting up libgssrpc4:amd64 (1.12.1+dfsg-1) ...
Setting up libidn11:amd64 (1.28-1) ...
Setting up libkadm5clnt-mit9:amd64 (1.12.1+dfsg-1) ...
Setting up libkdb5-7:amd64 (1.12.1+dfsg-1) ...
Setting up libkadm5srv-mit9:amd64 (1.12.1+dfsg-1) ...
Setting up libsasl2-modules-db:amd64 (2.1.26.dfsg1-9) ...
Setting up libsasl2-2:amd64 (2.1.26.dfsg1-9) ...
Setting up libldap-2.4-2:amd64 (2.4.39-1) ...
Setting up libxml2:amd64 (2.9.1+dfsg1-3) ...
Setting up libglib2.0-0:amd64 (2.38.2-5) ...
No schema files found: doing nothing.
Setting up libcroco3:amd64 (0.6.8-2) ...
Setting up mysql-common (5.5.35+dfsg-2) ...
Setting up libmysqlclient18:amd64 (5.5.35+dfsg-2) ...
Setting up libntlm0:amd64 (1.4-1) ...
Setting up libsigsegv2:amd64 (2.10-2) ...
Setting up libudns0:amd64 (0.4-1) ...
Setting up libunistring0:amd64 (0.9.3-5) ...
Setting up gettext-base (0.18.3.2-1) ...
Setting up m4 (1.4.17-3) ...
Setting up autoconf (2.69-5) ...
Setting up autotools-dev (20130810.1) ...
Setting up automake (1:1.14.1-3) ...
update-alternatives: using /usr/bin/automake-1.14 to provide /usr/bin/automake (automake) in auto mode
Setting up autopoint (0.18.3.2-1) ...
Setting up gettext (0.18.3.2-1) ...
Setting up intltool-debian (0.35.0+20060710.1) ...
Setting up po-debconf (1.0.16+nmu2) ...
Setting up debhelper (9.20140228) ...
Setting up libtool (2.4.2-1.7) ...
Setting up dh-autoreconf (9) ...
Setting up comerr-dev (2.1-1.42.9-3) ...
Setting up krb5-multidev (1.12.1+dfsg-1) ...
Setting up libexpat1-dev:amd64 (2.1.0-4) ...
Setting up libgsasl7 (1.8.0-2) ...
Setting up pkg-config (0.26-1) ...
Setting up libidn11-dev (1.28-1) ...
Setting up libntlm0-dev (1.4-1) ...
Setting up libkrb5-dev (1.12.1+dfsg-1) ...
Setting up libgsasl7-dev (1.8.0-2) ...
Setting up zlib1g-dev:amd64 (1:1.2.8.dfsg-1) ...
Setting up libmysqlclient-dev (5.5.35+dfsg-2) ...
Setting up libpam0g-dev:amd64 (1.1.8-2) ...
Setting up libpq5 (9.3.4-1) ...
Setting up libssl-dev:amd64 (1.0.1f-1) ...
Setting up libpq-dev (9.3.4-1) ...
Setting up libsqlite3-dev:amd64 (3.8.4.1-1) ...
Setting up libudns-dev (0.4-1) ...
Setting up libdb5.3-dev (5.3.28-3) ...
Setting up libdb-dev:amd64 (5.3.0) ...
Setting up libldap2-dev:amd64 (2.4.39-1) ...
Setting up sbuild-build-depends-jabberd2-dummy (0.invalid.0) ...
Processing triggers for libc-bin (2.18-4) ...

┌──────────────────────────────────────────────────────────────────────────────┐
│ Build environment                                                            │
└──────────────────────────────────────────────────────────────────────────────┘

Kernel: Linux 3.13-1-amd64 amd64 (x86_64)
Toolchain package versions: binutils_2.24-5 dpkg-dev_1.17.6 g++-4.8_4.8.2-16 gcc-4.8_4.8.2-16 libc6-dev_2.18-4 libstdc++-4.8-dev_4.8.2-16 libstdc++6_4.8.2-16 linux-libc-dev_3.13.7-1
Package versions: apt_0.9.16.1 autoconf_2.69-5 automake_1:1.14.1-3 autopoint_0.18.3.2-1 autotools-dev_20130810.1 base-files_7.2 base-passwd_3.5.32 bash_4.3-4 binfmt-support_2.1.3-2 binutils_2.24-5 bsdmainutils_9.0.5 bsdutils_1:2.20.1-5.6 build-essential_11.6 bzip2_1.0.6-5 clang-3.4_1:3.4-2 comerr-dev_2.1-1.42.9-3 coreutils_8.21-1.1 cpp_4:4.8.2-2 cpp-4.8_4.8.2-16 dash_0.5.7-4 debconf_1.5.52 debconf-i18n_1.5.52 debfoster_2.7-1.2 debhelper_9.20140228 debian-archive-keyring_2012.4 debianutils_4.4 dh-autoreconf_9 diffutils_1:3.3-1 dpkg_1.17.6 dpkg-dev_1.17.6 e2fslibs_1.42.9-3 e2fsprogs_1.42.9-3 fakeroot_1.20-3 file_1:5.17-1 findutils_4.4.2-7 g++_4:4.8.2-2 g++-4.8_4.8.2-16 gcc_4:4.8.2-2 gcc-4.8_4.8.2-16 gcc-4.8-base_4.8.2-16 gettext_0.18.3.2-1 gettext-base_0.18.3.2-1 gnupg_1.4.16-1.1 gpgv_1.4.16-1.1 grep_2.18-1 groff-base_1.22.2-5 gzip_1.6-3 hostname_3.15 init-system-helpers_1.18 initscripts_2.88dsf-51 insserv_1.14.0-5 intltool-debian_0.35.0+20060710.1 krb5-multidev_1.12.1+dfsg-1 libacl1_2.2.52-1 libapt-pkg4.12_0.9.16.1 libasan0_4.8.2-16 libasprintf0c2_0.18.3.2-1 libatomic1_4.8.2-16 libattr1_1:2.4.47-1 libaudit-common_1:2.3.4-1 libaudit1_1:2.3.4-1 libblkid1_2.20.1-5.6 libbz2-1.0_1.0.6-5 libc-bin_2.18-4 libc-dev-bin_2.18-4 libc6_2.18-4 libc6-dev_2.18-4 libcap2_1:2.22-1.2 libclang-common-3.4-dev_1:3.4-2 libclang1-3.4_1:3.4-2 libcloog-isl4_0.18.2-1 libcomerr2_1.42.9-3 libcroco3_0.6.8-2 libdb-dev_5.3.0 libdb5.1_5.1.29-7 libdb5.3_5.3.28-3 libdb5.3-dev_5.3.28-3 libdebconfclient0_0.189 libdpkg-perl_1.17.6 libexpat1_2.1.0-4 libexpat1-dev_2.1.0-4 libfakeroot_1.20-3 libffi-dev_3.0.13-12 libffi6_3.0.13-12 libgc1c2_1:7.2d-6 libgcc-4.8-dev_4.8.2-16 libgcc1_1:4.8.2-16 libgcrypt11_1.5.3-4 libgdbm3_1.8.3-12 libglib2.0-0_2.38.2-5 libgmp10_2:6.0.0+dfsg-1 libgnutls26_2.12.23-13 libgomp1_4.8.2-16 libgpg-error0_1.12-0.2 libgpm2_1.20.4-6.1 libgsasl7_1.8.0-2 libgsasl7-dev_1.8.0-2 libgssapi-krb5-2_1.12.1+dfsg-1 libgssrpc4_1.12.1+dfsg-1 libidn11_1.28-1 libidn11-dev_1.28-1 libisl10_0.12.2-1 libitm1_4.8.2-16 libjsoncpp0_0.6.0~rc2-3 libk5crypto3_1.12.1+dfsg-1 libkadm5clnt-mit9_1.12.1+dfsg-1 libkadm5srv-mit9_1.12.1+dfsg-1 libkdb5-7_1.12.1+dfsg-1 libkeyutils1_1.5.6-1 libkrb5-3_1.12.1+dfsg-1 libkrb5-dev_1.12.1+dfsg-1 libkrb5support0_1.12.1+dfsg-1 libldap-2.4-2_2.4.39-1 libldap2-dev_2.4.39-1 libllvm3.4_1:3.4-2 liblocale-gettext-perl_1.05-8 liblzma5_5.1.1alpha+20120614-2 libmagic1_1:5.17-1 libmount1_2.20.1-5.6 libmpc3_1.0.1-1 libmpfr4_3.1.2-1 libmysqlclient-dev_5.5.35+dfsg-2 libmysqlclient18_5.5.35+dfsg-2 libncurses5_5.9+20140118-1 libncursesw5_5.9+20140118-1 libntlm0_1.4-1 libntlm0-dev_1.4-1 libobjc-4.8-dev_4.8.2-16 libobjc4_4.8.2-16 libp11-kit0_0.20.2-4 libpam-modules_1.1.8-2 libpam-modules-bin_1.1.8-2 libpam-runtime_1.1.8-2 libpam0g_1.1.8-2 libpam0g-dev_1.1.8-2 libpcre3_1:8.31-2 libpipeline1_1.3.0-1 libpopt0_1.16-8 libpq-dev_9.3.4-1 libpq5_9.3.4-1 libpython-stdlib_2.7.5-5 libpython2.7-minimal_2.7.6-8 libpython2.7-stdlib_2.7.6-8 libquadmath0_4.8.2-16 libreadline6_6.3-4 libsasl2-2_2.1.26.dfsg1-9 libsasl2-modules-db_2.1.26.dfsg1-9 libselinux1_2.2.2-1 libsemanage-common_2.2-1 libsemanage1_2.2-1 libsepol1_2.2-1 libsigsegv2_2.10-2 libslang2_2.2.4-16 libsqlite3-0_3.8.4.1-1 libsqlite3-dev_3.8.4.1-1 libss2_1.42.9-3 libssl-dev_1.0.1f-1 libssl1.0.0_1.0.1f-1 libstdc++-4.8-dev_4.8.2-16 libstdc++6_4.8.2-16 libtasn1-6_3.4-3 libtext-charwidth-perl_0.04-7+b2 libtext-iconv-perl_1.7-5+b1 libtext-wrapi18n-perl_0.06-7 libtimedate-perl_2.3000-1 libtinfo-dev_5.9+20140118-1 libtinfo5_5.9+20140118-1 libtool_2.4.2-1.7 libtsan0_4.8.2-16 libudns-dev_0.4-1 libudns0_0.4-1 libunistring0_0.9.3-5 libusb-0.1-4_2:0.1.12-23.3 libustr-1.0-1_1.0.4-3 libuuid1_2.20.1-5.6 libxml2_2.9.1+dfsg1-3 linux-libc-dev_3.13.7-1 llvm-3.4_1:3.4-2 llvm-3.4-dev_1:3.4-2 llvm-3.4-runtime_1:3.4-2 login_1:4.1.5.1-1.1 lsb-base_4.1+Debian12 m4_1.4.17-3 make_3.81-8.3 man-db_2.6.6-1 mawk_1.3.3-17 mime-support_3.54 mount_2.20.1-5.6 multiarch-support_2.18-4 mysql-common_5.5.35+dfsg-2 nano_2.2.6-1+b1 ncurses-base_5.9+20140118-1 ncurses-bin_5.9+20140118-1 passwd_1:4.1.5.1-1.1 patch_2.7.1-4 perl_5.18.2-2+b1 perl-base_5.18.2-2+b1 perl-modules_5.18.2-2 pkg-config_0.26-1 po-debconf_1.0.16+nmu2 python_2.7.5-5 python-minimal_2.7.5-5 python2.7_2.7.6-8 python2.7-minimal_2.7.6-8 readline-common_6.3-4 sbuild-build-depends-core-dummy_0.invalid.0 sbuild-build-depends-jabberd2-dummy_0.invalid.0 sed_4.2.2-4 sensible-utils_0.0.9 sysv-rc_2.88dsf-51 sysvinit_2.88dsf-51 sysvinit-core_2.88dsf-51 sysvinit-utils_2.88dsf-51 tar_1.27.1-2 tzdata_2014a-1 util-linux_2.20.1-5.6 xz-utils_5.1.1alpha+20120614-2 zlib1g_1:1.2.8.dfsg-1 zlib1g-dev_1:1.2.8.dfsg-1

┌──────────────────────────────────────────────────────────────────────────────┐
│ Build                                                                        │
└──────────────────────────────────────────────────────────────────────────────┘


Unpack source
─────────────

dpkg-source: warning: extracting unsigned source package (jabberd2_2.2.17-1.dsc)
dpkg-source: info: extracting jabberd2 in jabberd2-2.2.17
dpkg-source: info: unpacking jabberd2_2.2.17.orig.tar.xz
dpkg-source: info: unpacking jabberd2_2.2.17-1.debian.tar.xz
dpkg-source: info: applying remove_config_files.diff
dpkg-source: info: applying man_hypen.diff
dpkg-source: info: applying sm_typo.diff
dpkg-source: info: applying usr_etc.diff
dpkg-source: info: applying etc_dbpath.diff
dpkg-source: info: applying etc_logpath.diff
dpkg-source: info: applying etc_pidpath.diff
dpkg-source: info: applying pkgname.diff
dpkg-source: info: applying clang_FTBFS_Wreturn-type.patch

Check disc space
────────────────

Sufficient free space for build

User Environment
────────────────

HOME=/sbuild-nonexistent
LOGNAME=nonas
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
SCHROOT_ALIAS_NAME=sid-amd64-sbuild
SCHROOT_CHROOT_NAME=sid-amd64-sbuild
SCHROOT_COMMAND=env
SCHROOT_GID=1000
SCHROOT_GROUP=nonas
SCHROOT_SESSION_ID=sid-amd64-sbuild-e8c0692c-cc34-44cb-81d1-6be33f8be5fe
SCHROOT_UID=1000
SCHROOT_USER=nonas
SHELL=/bin/sh
TERM=xterm
USER=nonas

dpkg-buildpackage
─────────────────

dpkg-buildpackage: source package jabberd2
dpkg-buildpackage: source version 2.2.17-1
dpkg-buildpackage: source distribution unstable
dpkg-buildpackage: source changed by Willem van den Akker <wvdakker@wilsoft.nl>
 dpkg-source --before-build jabberd2-2.2.17
dpkg-buildpackage: host architecture amd64
 fakeroot debian/rules clean
dh clean --with autoreconf
   dh_testdir
   dh_auto_clean
   dh_autoreconf_clean
   dh_clean
 dpkg-source -b jabberd2-2.2.17
dpkg-source: info: using source format `3.0 (quilt)'
dpkg-source: info: building jabberd2 using existing ./jabberd2_2.2.17.orig.tar.xz
dpkg-source: info: building jabberd2 in jabberd2_2.2.17-1.debian.tar.xz
dpkg-source: info: building jabberd2 in jabberd2_2.2.17-1.dsc
 debian/rules build
dh build --with autoreconf
   dh_testdir
   dh_autoreconf
libtoolize: putting auxiliary files in `.'.
libtoolize: copying file `./ltmain.sh'
libtoolize: Consider adding `AC_CONFIG_MACRO_DIR([m4])' to configure.ac and
libtoolize: rerunning libtoolize, to keep the correct libtool macros in-tree.
libtoolize: Consider adding `-I m4' to ACLOCAL_AMFLAGS in Makefile.am.
configure.ac:20: installing './config.guess'
configure.ac:20: installing './config.sub'
router/Makefile.am:1: warning: 'INCLUDES' is the old name for 'AM_CPPFLAGS' (or '*_CPPFLAGS')
s2s/Makefile.am:1: warning: 'INCLUDES' is the old name for 'AM_CPPFLAGS' (or '*_CPPFLAGS')
storage/Makefile.am:3: warning: 'INCLUDES' is the old name for 'AM_CPPFLAGS' (or '*_CPPFLAGS')
parallel-tests: installing './test-driver'
   debian/rules override_dh_auto_configure
make[1]: Entering directory `/«PKGBUILDDIR»'
dh_auto_configure -- \
		--prefix=/usr \
		--bindir=\${prefix}/sbin \
		--sysconfdir=/etc/jabberd2 \
		--program-prefix=jabberd2- \
		--enable-ssl \
		--enable-mysql \
		--enable-pgsql \
		--enable-sqlite \
		--enable-db \
		--enable-ldap \
		--enable-pam \
		--enable-pipe \
		--enable-anon \
		--enable-fs \
		--with-sasl=gsasl
configure: WARNING: unrecognized options: --disable-maintainer-mode
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking whether gcc understands -c and -o together... yes
checking for style of include used by make... GNU
checking dependency style of gcc... none
checking how to run the C preprocessor... gcc -E
checking whether ln -s works... yes
checking whether make sets $(MAKE)... (cached) yes
checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking how to print strings... printf
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking the maximum length of command line arguments... 3458764513820540925
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop
checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for dlltool... no
checking how to associate runtime and link libraries... printf %s\n
checking for ar... ar
checking for archiver @FILE support... @
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking for sysroot... no
checking for mt... no
checking if : is a manifest tool... no
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... yes
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... no
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking for shl_load... no
checking for shl_load in -ldld... no
checking for dlopen... no
checking for dlopen in -ldl... yes
checking whether a program can dlopen itself... yes
checking whether a statically linked program can dlopen itself... yes
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking CFLAGS optimization level... fine
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking for sys/types.h... (cached) yes
checking for netinet/in.h... yes
checking for arpa/nameser.h... yes
checking for netdb.h... yes
checking for resolv.h... yes
checking for ANSI C header files... (cached) yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking whether time.h and sys/time.h may both be included... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking for arpa/nameser.h... (cached) yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for netinet/in.h... (cached) yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking for stdint.h... (cached) yes
checking for stdlib.h... (cached) yes
checking for string.h... (cached) yes
checking sys/filio.h usability... no
checking sys/filio.h presence... no
checking for sys/filio.h... no
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/timeb.h usability... yes
checking sys/timeb.h presence... yes
checking for sys/timeb.h... yes
checking for sys/types.h... (cached) yes
checking for sys/stat.h... (cached) yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking syslog.h usability... yes
checking syslog.h presence... yes
checking for syslog.h... yes
checking for unistd.h... (cached) yes
checking windows.h usability... no
checking windows.h presence... no
checking for windows.h... no
checking winsock2.h usability... no
checking winsock2.h presence... no
checking for winsock2.h... no
checking for resolv.h... (cached) yes
checking for windns.h... no
checking for an ANSI C-conforming const... yes
checking for mode_t... yes
checking for off_t... yes
checking for pid_t... yes
checking for size_t... yes
checking whether time.h and sys/time.h may both be included... (cached) yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_zone... yes
checking for uint16_t... yes
checking for uint32_t... yes
checking for uint8_t... yes
checking for stdint-types....... "(putting them into ac-stdint.h)"
checking for uintptr_t... yes
checking for uint64_t... yes
... seen our uintptr_t in stdint.h (uint64_t too)
creating ac-stdint.h : _AC_STDINT_H
checking for int_least32_t... yes
checking for int_fast32_t... yes
..adding include stdint.h
... seen good stdint.h inttypes
... seen good uint64_t
... DONE ac-stdint.h
checking whether closedir returns void... no
checking for working alloca.h... yes
checking for alloca... yes
checking for mbstate_t... yes
checking for working POSIX fnmatch... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... yes
checking for working vfork... (cached) yes
checking for working memcmp... yes
checking for sys/time.h... (cached) yes
checking for unistd.h... (cached) yes
checking for alarm... yes
checking for working mktime... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... int,fd_set *,struct timeval *
checking return type of signal handlers... void
checking whether lstat correctly handles trailing slash... yes
checking whether stat accepts an empty string... no
checking for vprintf... yes
checking for _doprnt... no
checking for sys/select.h... (cached) yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... (cached) int,fd_set *,struct timeval *
checking for close... yes
checking for dup2... yes
checking for fcntl... yes
checking for _findfirst... no
checking for gethostname... yes
checking for getopt... yes
checking for getpagesize... yes
checking for getpid... yes
checking for gettimeofday... yes
checking for inet_aton... yes
checking for inet_ntoa... yes
checking for ioctl... yes
checking for isascii... yes
checking for memchr... yes
checking for memmove... yes
checking for memset... yes
checking for mkdir... yes
checking for _mkdir... no
checking for modf... yes
checking for select... yes
checking for setenv... yes
checking for sleep... yes
checking for Sleep... no
checking for socket... yes
checking for strcasecmp... yes
checking for strchr... yes
checking for strdup... yes
checking for strerror... yes
checking for stricmp... no
checking for strncasecmp... yes
checking for strndup... yes
checking for strnicmp... no
checking for strstr... yes
checking for tzset... yes
checking for uname... yes
checking for crypt... no
checking for crypt in -lcrypt... yes
checking for connect... yes
checking for _head_libws2_32_a in -lws2_32... no
checking for gethostbyname... yes
checking for gethostbyname... (cached) yes
checking for library containing inet_ntop... none required
checking for library containing inet_pton... none required
checking for res_query... no
checking for res_query in -lresolv... no
checking for res_query in -lbind... no
checking for res_query in -lresolv (alternate version)... yes
checking for syslog... yes
checking for vsyslog... yes
checking for snprintf... yes
checking for vsnprintf... yes
checking if snprintf can handle NULL arguments... yes
checking if vsnprintf can handle NULL arguments... yes
checking for socklen_t... yes
checking for XML_ParserCreate in -lexpat... yes
checking for stringprep_check_version in -lidn... yes
checking for Libidn version >= 0.3.0... yes
checking for dns_init in -ludns... yes
checking gsasl.h usability... yes
checking gsasl.h presence... yes
checking for gsasl.h... yes
checking for gsasl_check_version in -lgsasl... yes
checking for GnuSASL version >= 0.2.27... yes
checking openssl/crypto.h usability... yes
checking openssl/crypto.h presence... yes
checking for openssl/crypto.h... yes
checking for CRYPTO_lock in -lcrypto... yes
checking openssl/ssl.h usability... yes
checking openssl/ssl.h presence... yes
checking for openssl/ssl.h... yes
checking for SSL_connect in -lssl... yes
checking for OpenSSL version >= 0.9.6b... yes
checking for inflateEnd in -lz... yes
checking zlib.h usability... yes
checking zlib.h presence... yes
checking for zlib.h... yes
checking for mysql_config... /usr/bin/mysql_config
checking MySQL libraries... "-L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -ldl"
checking mysql includes... "-I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing   -g -DNDEBUG"
checking for pg_config... /usr/bin/pg_config
checking PostgresSQL libraries... "-L/usr/lib -lpq"
checking pgsql includes... "-I/usr/include/postgresql"
checking sqlite3.h usability... yes
checking sqlite3.h presence... yes
checking for sqlite3.h... yes
checking for sqlite3_open in -lsqlite3... yes
checking db.h usability... yes
checking db.h presence... yes
checking for db.h... yes
checking for db_create in -ldb43... no
checking for db_create in -ldb42... no
checking for db_create in -ldb-4.3... no
checking for db_create in -ldb-4.2... no
checking for db_create in -ldb-4.1... no
checking for db_create in -ldb-4... no
checking for db_create in -ldb4... no
checking for db_create in -ldb41... no
checking for db_create in -ldb... yes
checking for Berkeley DB version >= 4.1.25... yes
checking lber.h usability... yes
checking lber.h presence... yes
checking for lber.h... yes
checking ldap.h usability... yes
checking ldap.h presence... yes
checking for ldap.h... yes
checking for ber_alloc in -llber... yes
checking for ldap_init in -lldap... yes
checking for OpenLDAP version >= 2.1.0... yes
checking security/pam_appl.h usability... yes
checking security/pam_appl.h presence... yes
checking for security/pam_appl.h... yes
checking for pam_start in -lpam... yes
checking for sys/wait.h... (cached) yes
checking for vfork.h... (cached) no
checking for fork... (cached) yes
checking for vfork... (cached) yes
checking for working fork... (cached) yes
checking for working vfork... (cached) yes
checking for pipe... yes
checking for wait... yes
checking for in_port_t... yes
checking for sa_family_t... yes
checking for struct sockaddr_storage... yes
checking for struct sockaddr_in6... yes
checking for struct in6_addr... yes
checking for broken __ss_family member in struct sockaddr_storage... no
checking for broken __ss_len member in struct sockaddr_storage... no
checking sys/event.h usability... no
checking sys/event.h presence... no
checking for sys/event.h... no
checking sys/epoll.h usability... yes
checking sys/epoll.h presence... yes
checking for sys/epoll.h... yes
checking for epoll_create... yes
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking for poll... yes
checking for sys/select.h... (cached) yes
checking for select... (cached) yes
checking for pkg-config... /usr/bin/pkg-config
checking pkg-config is at least version 0.9.0... yes
checking for CHECK... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Doxyfile
config.status: creating Makefile
config.status: creating etc/Makefile
config.status: creating etc/templates/Makefile
config.status: creating man/Makefile
config.status: creating subst/Makefile
config.status: creating util/Makefile
config.status: creating mio/Makefile
config.status: creating sx/Makefile
config.status: creating storage/Makefile
config.status: creating c2s/Makefile
config.status: creating router/Makefile
config.status: creating s2s/Makefile
config.status: creating sm/Makefile
config.status: creating tools/Makefile
config.status: creating tests/Makefile
config.status: creating config.h
config.status: executing depfiles commands
config.status: executing libtool commands
configure: WARNING: unrecognized options: --disable-maintainer-mode
make[1]: Leaving directory `/«PKGBUILDDIR»'
   dh_auto_build
make[1]: Entering directory `/«PKGBUILDDIR»'
make  all-recursive
make[2]: Entering directory `/«PKGBUILDDIR»'
Making all in etc
make[3]: Entering directory `/«PKGBUILDDIR»/etc'
Making all in templates
make[4]: Entering directory `/«PKGBUILDDIR»/etc/templates'
generating roster.xml.dist from roster.xml.dist.in
make[4]: Leaving directory `/«PKGBUILDDIR»/etc/templates'
make[4]: Entering directory `/«PKGBUILDDIR»/etc'
generating jabberd-c2s.conf from jabberd-c2s.conf.in
generating jabberd-router.conf from jabberd-router.conf.in
generating jabberd-s2s.conf from jabberd-s2s.conf.in
generating jabberd-sm.conf from jabberd-sm.conf.in
generating c2s.xml.dist from c2s.xml.dist.in
generating router.xml.dist from router.xml.dist.in
generating s2s.xml.dist from s2s.xml.dist.in
generating sm.xml.dist from sm.xml.dist.in
generating jabberd.cfg.dist from jabberd.cfg.dist.in
generating router-users.xml.dist from router-users.xml.dist.in
generating router-filter.xml.dist from router-filter.xml.dist.in
make[4]: Leaving directory `/«PKGBUILDDIR»/etc'
make[3]: Leaving directory `/«PKGBUILDDIR»/etc'
Making all in man
make[3]: Entering directory `/«PKGBUILDDIR»/man'
generating jabberd.8 from jabberd.8.in
generating c2s.8 from c2s.8.in
generating router.8 from router.8.in
generating s2s.8 from s2s.8.in
generating sm.8 from sm.8.in
make[3]: Leaving directory `/«PKGBUILDDIR»/man'
Making all in subst
make[3]: Entering directory `/«PKGBUILDDIR»/subst'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o dirent.lo dirent.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o getopt.lo getopt.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o gettimeofday.lo gettimeofday.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o inet_aton.lo inet_aton.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o inet_ntop.lo inet_ntop.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o inet_pton.lo inet_pton.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o snprintf.lo snprintf.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o syslog.lo syslog.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o strndup.lo strndup.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o timegm.lo timegm.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o libsubst.la  dirent.lo getopt.lo gettimeofday.lo inet_aton.lo inet_ntop.lo inet_pton.lo snprintf.lo syslog.lo strndup.lo timegm.lo -fPIE -pie -Wl,-z,relro -Wl,-z,now -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/subst'
Making all in tools
make[3]: Entering directory `/«PKGBUILDDIR»/tools'
generating jabberd from jabberd.in
make[3]: Leaving directory `/«PKGBUILDDIR»/tools'
Making all in mio
make[3]: Entering directory `/«PKGBUILDDIR»/mio'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio.lo mio.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio_epoll.lo mio_epoll.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio_poll.lo mio_poll.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio_select.lo mio_select.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio_kqueue.lo mio_kqueue.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mio_wsasync.lo mio_wsasync.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o libmio.la  mio.lo mio_epoll.lo mio_poll.lo mio_select.lo mio_kqueue.lo mio_wsasync.lo -fPIE -pie -Wl,-z,relro -Wl,-z,now -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/mio'
Making all in sx
make[3]: Entering directory `/«PKGBUILDDIR»/sx'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o callback.lo callback.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o chain.lo chain.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o client.lo client.c
client.c:149:7: warning: assigning to 'char *' from 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    c = buf->data;
      ^ ~~~~~~~~~
client.c:159:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    assert(buf->len == strlen(buf->data)+1);
                              ^~~~~~~~~
/usr/include/assert.h:89:5: note: expanded from macro 'assert'
  ((expr)                                                               \
    ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
2 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o env.lo env.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o error.lo error.c
error.c:66:23: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len = sprintf(buf->data, "<stream:stream xmlns:stream='" uri_STREAMS "' version='1.0'>");
                      ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:69:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "<stream:error xmlns:stream='" uri_STREAMS "'><%s xmlns='" uri_STREAM_ERR "'/></stream:error>", _stream_errors[err]);
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:71:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "<stream:error xmlns:stream='" uri_STREAMS "'><%s xmlns='" uri_STREAM_ERR "'/><text xmlns='" uri_STREAM_ERR "'>%s</text></stream:error>", _stream_errors[err], text);
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:74:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "</stream:stream>");
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:112:23: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len = sprintf(buf->data, "<stream:stream xmlns:stream='" uri_STREAMS "' version='1.0'>");
                      ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:115:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "<stream:error xmlns:stream='" uri_STREAMS "'><%s xmlns='" uri_STREAM_ERR "'/></stream:error>", _stream_errors[err]);
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:117:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "<stream:error xmlns:stream='" uri_STREAMS "'><%s xmlns='" uri_STREAM_ERR "'>%s</%s></stream:error>", _stream_errors[err], content, _stream_errors[err]);
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
error.c:120:24: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len += sprintf(&(buf->data[len]), "</stream:stream>");
                       ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
8 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o io.lo io.c
io.c:39:28: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(XML_Parse(s->expat, buf->data, buf->len, 0) == 0) {
                           ^~~~~~~~~
/usr/include/expat.h:778:42: note: passing argument to parameter 's' here
XML_Parse(XML_Parser parser, const char *s, int len, int isFinal);
                                         ^
io.c:219:30: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        out = _sx_buffer_new(in->data, in->len, in->notify, in->notify_arg);
                             ^~~~~~~~
./sx.h:221:70: note: passing argument to parameter 'data' here
JABBERD2_API sx_buf_t                     _sx_buffer_new(const char *data, int len, _sx_notify_t notify, void *notify_arg);
                                                                     ^
io.c:284:26: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    out = _sx_buffer_new(in->data, in->len, in->notify, in->notify_arg);
                         ^~~~~~~~
./sx.h:221:70: note: passing argument to parameter 'data' here
JABBERD2_API sx_buf_t                     _sx_buffer_new(const char *data, int len, _sx_notify_t notify, void *notify_arg);
                                                                     ^
3 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o server.lo server.c
server.c:164:7: warning: assigning to 'char *' from 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    c = buf->data;
      ^ ~~~~~~~~~
server.c:173:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    assert(buf->len == strlen(buf->data) + 1); /* post-facto overrun detection */
                              ^~~~~~~~~
/usr/include/assert.h:89:5: note: expanded from macro 'assert'
  ((expr)                                                               \
    ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
2 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o sx.lo sx.c
sx.c:232:31: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        buf->data = buf->heap = (char *) malloc(sizeof(char) * len);
                              ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
sx.c:297:15: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    buf->heap = new_heap;
              ^ ~~~~~~~~
sx.c:298:15: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    buf->data = new_heap + before;
              ^ ~~~~~~~~~~~~~~~~~
sx.c:314:15: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    buf->data = newdata;
              ^ ~~~~~~~
sx.c:316:15: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    buf->heap = newheap;
              ^ ~~~~~~~
5 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o sasl_gsasl.lo sasl_gsasl.c
sasl_gsasl.c:223:28: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = gsasl_encode(sd, buf->data, buf->len, &out, &len);
                           ^~~~~~~~~
/usr/include/gsasl.h:448:22: note: passing argument to parameter 'input' here
                                     const char *input, size_t input_len,
                                                 ^
sasl_gsasl.c:251:28: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = gsasl_decode(sd, buf->data, buf->len, &out, &len);
                           ^~~~~~~~~
/usr/include/gsasl.h:451:22: note: passing argument to parameter 'input' here
                                     const char *input, size_t input_len,
                                                 ^
2 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o ssl.lo ssl.c
ssl.c:406:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jqueue_push(sc->wq, _sx_buffer_new(buf->data, buf->len, buf->notify, buf->notify_arg), 0);
                                           ^~~~~~~~~
./sx.h:221:70: note: passing argument to parameter 'data' here
JABBERD2_API sx_buf_t                     _sx_buffer_new(const char *data, int len, _sx_notify_t notify, void *notify_arg);
                                                                     ^
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o compress.lo compress.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o ack.lo ack.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o address.lo address.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o libsx.la  callback.lo chain.lo client.lo env.lo error.lo io.lo server.lo sx.lo sasl_gsasl.lo  ssl.lo compress.lo ack.lo address.lo -fPIE -pie -Wl,-z,relro -Wl,-z,now -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/sx'
Making all in util
make[3]: Entering directory `/«PKGBUILDDIR»/util'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o access.lo access.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o base64.lo base64.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o config.lo config.c
config.c:211:41: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
            elem->values[elem->nvalues] = val;
                                        ^ ~~~
config.c:349:22: warning: using the result of an assignment as a condition without parentheses [-Wparentheses]
    while (var_start = strstr(s, "${")) {
           ~~~~~~~~~~^~~~~~~~~~~~~~~~~
config.c:349:22: note: place parentheses around the assignment to silence this warning
    while (var_start = strstr(s, "${")) {
                     ^
           (                          )
config.c:349:22: note: use '==' to turn this assignment into an equality comparison
    while (var_start = strstr(s, "${")) {
                     ^
                     ==
2 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o datetime.lo datetime.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o hex.lo hex.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o inaddr.lo inaddr.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o jid.lo jid.c
jid.c:51:23: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strncpy(node, jid->node, MAXLEN_JID_COMP);
                      ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:58:25: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strncpy(domain, jid->domain, MAXLEN_JID_COMP);
                        ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:65:27: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strncpy(resource, jid->resource, MAXLEN_JID_COMP);
                          ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:75:40: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid_reset_components_internal(jid, node, domain, resource, 0);
                                       ^~~~
jid.c:25:76: note: passing argument to parameter 'node' here
static jid_t jid_reset_components_internal(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource, int prepare);
                                                                           ^
jid.c:75:46: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid_reset_components_internal(jid, node, domain, resource, 0);
                                             ^~~~~~
jid.c:25:103: note: passing argument to parameter 'domain' here
static jid_t jid_reset_components_internal(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource, int prepare);
                                                                                                      ^
jid.c:75:54: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid_reset_components_internal(jid, node, domain, resource, 0);
                                                     ^~~~~~~~
jid.c:25:132: note: passing argument to parameter 'resource' here
static jid_t jid_reset_components_internal(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource, int prepare);
                                                                                                                                   ^
jid.c:126:15: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid->node = "";
              ^ ~~
jid.c:127:17: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid->domain = "";
                ^ ~~
jid.c:128:19: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid->resource = "";
                  ^ ~~
jid.c:135:22: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        len = strlen(id);
                     ^~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:144:14: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        myid = (char *) malloc(jid->jid_data_len);
             ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
jid.c:146:13: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    sprintf(myid, "%.*s", len, id);
            ^~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
jid.c:155:18: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    cur = strstr(myid, "/");
                 ^~~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
jid.c:155:9: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    cur = strstr(myid, "/");
        ^ ~~~~~~~~~~~~~~~~~
jid.c:161:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strlen(cur) > 0) {
                  ^~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:171:18: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    cur = strstr(myid, "@");
                 ^~~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
jid.c:171:9: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    cur = strstr(myid, "@");
        ^ ~~~~~~~~~~~~~~~~~
jid.c:175:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strlen(cur) == 0) {
                  ^~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:220:21: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    node_l = strlen(node);
                    ^~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:221:23: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    domain_l = strlen(domain);
                      ^~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:222:25: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    resource_l = strlen(resource);
                        ^~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:235:23: warning: assigning to 'unsigned char *' from 'jid_static_buf' (aka 'char [3075]') converts between pointers to integer types with different sign [-Wpointer-sign]
        jid->jid_data = staticTmpBuf;
                      ^ ~~~~~~~~~~~~
jid.c:245:13: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->node, node, node_l);
            ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:34: note: passing argument to parameter '__dest' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                 ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:245:24: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->node, node, node_l);
                       ^~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:249:13: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->domain, domain, domain_l);
            ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:34: note: passing argument to parameter '__dest' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                 ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:249:26: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->domain, domain, domain_l);
                         ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:253:13: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->resource, resource, resource_l);
            ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:34: note: passing argument to parameter '__dest' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                 ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:253:28: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    strncpy(jid->resource, resource, resource_l);
                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:117:65: note: passing argument to parameter '__src' here
__NTH (strncpy (char *__restrict __dest, const char *__restrict __src,
                                                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:313:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nlen = strlen(jid->node);
                  ^~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:314:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    dlen = strlen(jid->domain);
                  ^~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:315:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rlen = strlen(jid->resource);
                  ^~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:320:16: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strcpy(jid->_user, jid->domain);
               ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:102:33: note: passing argument to parameter '__dest' here
__NTH (strcpy (char *__restrict __dest, const char *__restrict __src))
                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:320:28: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strcpy(jid->_user, jid->domain);
                           ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:102:64: note: passing argument to parameter '__src' here
__NTH (strcpy (char *__restrict __dest, const char *__restrict __src))
                                                               ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:324:18: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        snprintf(jid->_user, ulen, "%s@%s", jid->node, jid->domain);
                 ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:69:29: note: expanded from macro 'snprintf'
  __builtin___snprintf_chk (str, len, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                            ^
jid.c:329:16: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strcpy(jid->_full, jid->_user);
               ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:102:33: note: passing argument to parameter '__dest' here
__NTH (strcpy (char *__restrict __dest, const char *__restrict __src))
                                ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:329:28: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        strcpy(jid->_full, jid->_user);
                           ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:102:64: note: passing argument to parameter '__src' here
__NTH (strcpy (char *__restrict __dest, const char *__restrict __src))
                                                               ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
jid.c:332:18: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        snprintf(jid->_full, ulen+1+rlen, "%s/%s", jid->_user, jid->resource);
                 ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:69:29: note: expanded from macro 'snprintf'
  __builtin___snprintf_chk (str, len, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                            ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
jid.c:360:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
jid.c:360:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_user, b->_user);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
jid.c:369:19: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                  ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
jid.c:369:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    return strcmp(a->_full, b->_full);
                            ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
jid.c:392:21: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
          new->node = "";
                    ^ ~~
jid.c:396:23: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
          new->domain = "";
                      ^ ~~
jid.c:400:25: warning: assigning to 'unsigned char *' from 'char [1]' converts between pointers to integer types with different sign [-Wpointer-sign]
          new->resource = "";
                        ^ ~~
jid.c:405:27: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_user = strdup(jid->_user);
                          ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1283:36: note: expanded from macro '__strdup'
                     : ({ size_t __len = strlen (s) + 1;                      \
                                                 ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:405:27: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_user = strdup(jid->_user);
                          ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1288:17: note: expanded from macro '__strdup'
                  : __strdup (s)))
                              ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1278:36: note: passing argument to parameter '__string' here
extern char *__strdup (const char *__string) __THROW __attribute_malloc__;
                                   ^
jid.c:405:18: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_user = strdup(jid->_user);
                 ^ ~~~~~~~~~~~~~~~~~~
jid.c:407:27: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_full = strdup(jid->_full);
                          ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1283:36: note: expanded from macro '__strdup'
                     : ({ size_t __len = strlen (s) + 1;                      \
                                                 ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
jid.c:407:27: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_full = strdup(jid->_full);
                          ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1288:17: note: expanded from macro '__strdup'
                  : __strdup (s)))
                              ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1278:36: note: passing argument to parameter '__string' here
extern char *__strdup (const char *__string) __THROW __attribute_malloc__;
                                   ^
jid.c:407:18: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
      new->_full = strdup(jid->_full);
                 ^ ~~~~~~~~~~~~~~~~~~
jid.c:511:38: warning: passing 'char [41]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
           jid_reset_components(jid, hashBuf, jid->domain, jid->resource);
                                     ^~~~~~~
jid.c:281:60: note: passing argument to parameter 'node' here
jid_t jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource) {
                                                           ^
jid.c:515:49: warning: passing 'char [41]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
           jid_reset_components(jid, jid->node, hashBuf, jid->resource);
                                                ^~~~~~~
jid.c:281:87: note: passing argument to parameter 'domain' here
jid_t jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource) {
                                                                                      ^
jid.c:519:62: warning: passing 'char [41]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
           jid_reset_components(jid, jid->node, jid->domain, hashBuf);
                                                             ^~~~~~~
jid.c:281:116: note: passing argument to parameter 'resource' here
jid_t jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource) {
                                                                                                                   ^
73 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o jqueue.lo jqueue.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o jsignal.lo jsignal.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o log.lo log.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o md5.lo md5.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o nad.lo nad.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o pool.lo pool.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o rate.lo rate.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o serial.lo serial.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o sha1.lo sha1.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o stanza.lo stanza.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o str.lo str.c
str.c:362:18: warning: passing 'unsigned char [20]' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    hex_from_raw(hashval, 20, hashbuf);
                 ^~~~~~~
./util.h:405:38: note: passing argument to parameter 'in' here
JABBERD2_API void hex_from_raw(char *in, int inlen, char *out);
                                     ^
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o xdata.lo xdata.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o xhash.lo xhash.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o libutil.la  access.lo base64.lo config.lo datetime.lo hex.lo inaddr.lo jid.lo jqueue.lo jsignal.lo log.lo md5.lo nad.lo pool.lo rate.lo serial.lo sha1.lo stanza.lo str.lo xdata.lo xhash.lo -fPIE -pie -Wl,-z,relro -Wl,-z,now -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/util'
Making all in c2s
make[3]: Entering directory `/«PKGBUILDDIR»/c2s'
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-authreg.o `test -f 'authreg.c' || echo './'`authreg.c
authreg.c:47:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    modules_path = config_get_one(c2s->config, "authreg.path", 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg.c:348:40: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess->resources->jid = jid_new(sess->s->req_to, -1);
                                       ^~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
authreg.c:349:52: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jid_reset_components(sess->resources->jid, username, sess->resources->jid->domain, resource);
                                                   ^~~~~~~~
../util/jid.h:88:87: note: passing argument to parameter 'node' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                      ^
authreg.c:349:92: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jid_reset_components(sess->resources->jid, username, sess->resources->jid->domain, resource);
                                                                                           ^~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
authreg.c:464:44: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if((c2s->ar->delete_user)(c2s->ar, sess->resources->jid->node, sess->host->realm) != 0) {
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
authreg.c:526:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(username, sess->resources->jid->node) != 0)
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
authreg.c:609:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    sess->resources->jid = jid_new(sess->s->req_to, -1);
                                   ^~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
authreg.c:610:48: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid_reset_components(sess->resources->jid, username, sess->resources->jid->domain, sess->resources->jid->resource);
                                               ^~~~~~~~
../util/jid.h:88:87: note: passing argument to parameter 'node' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                      ^
13 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-bind.o `test -f 'bind.c' || echo './'`bind.c
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-c2s.o `test -f 'c2s.c' || echo './'`c2s.c
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:901:17: note: expanded from macro 'strncmp'
                          && strlen (s2) < ((size_t) (n))))                   \
                                     ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:19: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                ^
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
c2s.c:111:72: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                && sess->result == NULL && len >= 4 && strncmp("GET ", buf->data, 4) == 0) {
                                                                       ^~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:38: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                                   ^
/usr/include/string.h:143:51: note: passing argument to parameter '__s2' here
extern int strncmp (const char *__s1, const char *__s2, size_t __n)
                                                  ^
c2s.c:269:37: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                jid_t jid = jid_new(sess->s->auth_id, -1);
                                    ^~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
c2s.c:287:90: warning: passing 'char [1024]' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if (jid == NULL || jid_reset_components(jid, jid->node, jid->domain, resource_buf) == NULL) {
                                                                                         ^~~~~~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
c2s.c:296:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
c2s.c:296:56: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strcmp(bres->jid->resource, jid->resource) == 0){
                                                       ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
c2s.c:336:76: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                nad_append_cdata(sess->result, jid_full(bres->jid), strlen(jid_full(bres->jid)), 3);
                                                                           ^~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
c2s.c:336:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                nad_append_cdata(sess->result, jid_full(bres->jid), strlen(jid_full(bres->jid)), 3);
                                               ^~~~~~~~~~~~~~~~~~~
../util/nad.h:164:59: note: passing argument to parameter 'cdata' here
JABBERD2_API void nad_append_cdata(nad_t nad, const char *cdata, int len, int depth);
                                                          ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
c2s.c:376:31: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(strcmp(bres->jid->resource, resource_buf) == 0)
                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:899:21: note: expanded from macro 'strncmp'
                       && strlen (s1) < ((size_t) (n)))                       \
                                  ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
c2s.c:455:36: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(strncmp(jid_full(bres->jid), NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr)) == 0)
                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:34: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                               ^
/usr/include/string.h:143:33: note: passing argument to parameter '__s1' here
extern int strncmp (const char *__s1, const char *__s2, size_t __n)
                                ^
c2s.c:585:58: warning: passing 'int *' to parameter of type 'socklen_t *' (aka 'unsigned int *') converts between pointers to integer types with different sign [-Wpointer-sign]
            getpeername(fd->fd, (struct sockaddr *) &sa, &namelen);
                                                         ^~~~~~~~
/usr/include/x86_64-linux-gnu/sys/socket.h:142:26: note: passing argument to parameter '__len' here
                        socklen_t *__restrict __len) __THROW;
                                              ^
c2s.c:622:58: warning: passing 'int *' to parameter of type 'socklen_t *' (aka 'unsigned int *') converts between pointers to integer types with different sign [-Wpointer-sign]
            getsockname(fd->fd, (struct sockaddr *) &sa, &namelen);
                                                         ^~~~~~~~
/usr/include/x86_64-linux-gnu/sys/socket.h:128:26: note: passing argument to parameter '__len' here
                        socklen_t *__restrict __len) __THROW;
                                              ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
c2s.c:687:54: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(sess->resources != NULL && strcmp(sess->resources->jid->domain, from) == 0) {
                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
c2s.c:992:41: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    tres->jid = jid_new(NAD_AVAL(nad, target), NAD_AVAL_L(nad, target));
                                        ^~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
c2s.c:1087:35: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    jid = jid_new(sess->s->auth_id, -1);
                                  ^~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
c2s.c:1101:35: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    jid = jid_new(NAD_AVAL(nad, target), NAD_AVAL_L(nad, target));
                                  ^~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
c2s.c:1219:64: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                            if((c2s->ar->delete_user)(c2s->ar, bres->jid->node, sess->host->realm) != 0)
                                                               ^~~~~~~~~~~~~~~
c2s.c:1271:57: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        sx_auth(sess->s, "traditional", jid_full(bres->jid));
                                                        ^~~~~~~~~~~~~~~~~~~
../sx/sx.h:172:95: note: passing argument to parameter 'auth_id' here
JABBERD2_API void                        sx_auth(sx_t s, const char *auth_method, const char *auth_id);
                                                                                              ^
51 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-main.o `test -f 'main.c' || echo './'`main.c
main.c:58:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pidfile = config_get_one(c2s->config, "pidfile", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:90:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->id = config_get_one(c2s->config, "id", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:94:20: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->router_ip = config_get_one(c2s->config, "router.ip", 0);
                   ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:100:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->router_user = config_get_one(c2s->config, "router.user", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:103:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->router_pass = config_get_one(c2s->config, "router.pass", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:107:25: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->router_pemfile = config_get_one(c2s->config, "router.pemfile", 0);
                        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:125:27: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        c2s->log_facility = config_get_one(c2s->config, "log.facility", 0);
                          ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:126:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        c2s->log_ident = config_get_one(c2s->config, "log.ident", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:130:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        c2s->log_ident = config_get_one(c2s->config, "log.file", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:132:23: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->packet_stats = config_get_one(c2s->config, "stats.packet", 0);
                      ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:134:19: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->local_ip = config_get_one(c2s->config, "local.ip", 0);
                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:140:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->local_pemfile = config_get_one(c2s->config, "local.pemfile", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:142:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->local_cachain = config_get_one(c2s->config, "local.cachain", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:148:23: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->http_forward = config_get_one(c2s->config, "local.httpforward", 0);
                      ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:158:19: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->pbx_pipe = config_get_one(c2s->config, "pbx.pipe", 0);
                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:187:25: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    c2s->ar_module_name = config_get_one(c2s->config, "authreg.module", 0);
                        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:239:9: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    str = config_get_one(c2s->config, "io.access.order", 0);
        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:474:32: warning: passing 'const char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(jid_reset(&jid, creds->authzid, -1) == NULL)
                               ^~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
main.c:478:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(!s->req_to || (strcmp(jid.domain, s->req_to) != 0))
                                     ^~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
main.c:490:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (strcmp(creds->authnid, jid.node) == 0 &&
                                           ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
main.c:491:53: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    (c2s->ar->user_exists)(c2s->ar, jid.node, jid.domain))
                                                    ^~~~~~~~
main.c:491:63: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    (c2s->ar->user_exists)(c2s->ar, jid.node, jid.domain))
                                                              ^~~~~~~~~~
main.c:499:29: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            jid_reset(&jid, s->req_to, -1);
                            ^~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
main.c:504:25: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            strcpy(buf, jid.node);
                        ^~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string3.h:102:64: note: passing argument to parameter '__src' here
__NTH (strcpy (char *__restrict __dest, const char *__restrict __src))
                                                               ^
/usr/include/x86_64-linux-gnu/sys/cdefs.h:57:59: note: expanded from macro '__NTH'
#  define __NTH(fct)    __attribute__ ((__nothrow__ __LEAF)) fct
                                                             ^
34 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-sm.o `test -f 'sm.c' || echo './'`sm.c
sm.c:69:73: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    sx_nad_write(sess->c2s->router, _sm_build_route(sess, res, "start", jid_full(res->jid), res->sm_request));
                                                                        ^~~~~~~~~~~~~~~~~~
../sx/sx.h:166:50: note: expanded from macro 'sx_nad_write'
#define sx_nad_write(s,nad) sx_nad_write_elem(s, nad, 0)
                                                 ^
sm.c:34:87: note: passing argument to parameter 'target' here
static nad_t _sm_build_route(sess_t sess, bres_t res, const char *action, const char *target, char *id) {
                                                                                      ^
sm.c:79:74: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    sx_nad_write(sess->c2s->router, _sm_build_route(sess, res, "create", jid_user(res->jid), res->sm_request));
                                                                         ^~~~~~~~~~~~~~~~~~
../sx/sx.h:166:50: note: expanded from macro 'sx_nad_write'
#define sx_nad_write(s,nad) sx_nad_write_elem(s, nad, 0)
                                                 ^
sm.c:34:87: note: passing argument to parameter 'target' here
static nad_t _sm_build_route(sess_t sess, bres_t res, const char *action, const char *target, char *id) {
                                                                                      ^
sm.c:83:74: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    sx_nad_write(sess->c2s->router, _sm_build_route(sess, res, "delete", jid_user(res->jid), NULL));
                                                                         ^~~~~~~~~~~~~~~~~~
../sx/sx.h:166:50: note: expanded from macro 'sx_nad_write'
#define sx_nad_write(s,nad) sx_nad_write_elem(s, nad, 0)
                                                 ^
sm.c:34:87: note: passing argument to parameter 'target' here
static nad_t _sm_build_route(sess_t sess, bres_t res, const char *action, const char *target, char *id) {
                                                                                      ^
3 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-pbx.o `test -f 'pbx.c' || echo './'`pbx.c
gcc -DHAVE_CONFIG_H -I. -I..  -DCONFIG_DIR=\"/etc/jabberd2\" -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o c2s-pbx_commands.o `test -f 'pbx_commands.c' || echo './'`pbx_commands.c
pbx_commands.c:140:18: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        jid = jid_new(cmd, len);
                                      ^~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
pbx_commands.c:145:15: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                shahash_r(jid_full(jid), sesshash);
                                          ^~~~~~~~~~~~~
../util/util.h:126:41: note: passing argument to parameter 'str' here
JABBERD2_API void shahash_r(const char* str, char hashbuf[41]);
                                        ^
pbx_commands.c:145:30: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                shahash_r(jid_full(jid), sesshash);
                                                         ^~~~~~~~
../util/util.h:126:51: note: passing argument to parameter 'hashbuf' here
JABBERD2_API void shahash_r(const char* str, char hashbuf[41]);
                                                  ^
pbx_commands.c:146:37: warning: passing 'unsigned char [44]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                sess = xhash_get(c2s->sessions, hashbuf);
                                                                ^~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
4 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o c2s c2s-authreg.o c2s-bind.o c2s-c2s.o c2s-main.o c2s-sm.o c2s-pbx.o c2s-pbx_commands.o ../sx/libsx.la ../mio/libmio.la ../util/libutil.la ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/c2s'
Making all in router
make[3]: Entering directory `/«PKGBUILDDIR»/router'
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o aci.o aci.c
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o main.o main.c
main.c:52:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pidfile = config_get_one(r->config, "pidfile", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:82:11: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    r->id = config_get_one(r->config, "id", 0);
          ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:99:25: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        r->log_facility = config_get_one(r->config, "log.facility", 0);
                        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:100:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        r->log_ident = config_get_one(r->config, "log.ident", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:104:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        r->log_ident = config_get_one(r->config, "log.file", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:106:17: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    r->local_ip = config_get_one(r->config, "local.ip", 0);
                ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:112:21: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    r->local_secret = config_get_one(r->config, "local.secret", 0);
                    ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:114:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    r->local_pemfile = config_get_one(r->config, "local.pemfile", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:140:9: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    str = config_get_one(r->config, "io.access.order", 0);
        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:203:29: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    r->message_logging_file = config_get_one(r->config, "message_logging.file", 0);
                            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
10 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o router.o router.c
router.c:209:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (name = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
router.c:220:21: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(strcmp(user, name->domain) != 0 && !aci_check(comp->r->aci, "bind", user)) {
                    ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
router.c:231:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(xhash_get(comp->r->routes, name->domain) != NULL && multi < 0) {
                                  ^~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
router.c:242:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->name, name->domain) == 0) {
                               ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
router.c:275:41: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        comp->r->default_route = strdup(name->domain);
                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1283:36: note: expanded from macro '__strdup'
                     : ({ size_t __len = strlen (s) + 1;                      \
                                                 ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
router.c:275:41: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        comp->r->default_route = strdup(name->domain);
                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:1291:32: note: expanded from macro 'strdup'
#   define strdup(s) __strdup (s)
                               ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1288:17: note: expanded from macro '__strdup'
                  : __strdup (s)))
                              ^
/usr/include/x86_64-linux-gnu/bits/string2.h:1278:36: note: passing argument to parameter '__string' here
extern char *__strdup (const char *__string) __THROW __attribute_malloc__;
                                   ^
router.c:292:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_put(comp->r->log_sinks, pstrdup(xhash_pool(comp->r->log_sinks), name->domain), (void *) comp);
                                                                              ^~~~~~~~~~~~
../util/pool.h:105:50: note: passing argument to parameter 'src' here
JABBERD2_API char *pstrdup(pool_t p, const char *src); /* wrapper around strdup, gains mem from pool */
                                                 ^
router.c:297:37: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    n = _route_add(comp->r->routes, name->domain, comp, multi<0?route_SINGLE:route_MULTI_TO);
                                    ^~~~~~~~~~~~
router.c:159:48: note: passing argument to parameter 'name' here
static int _route_add(xht hroutes, const char *name, component_t comp, route_type_t rtype) {
                                               ^
router.c:298:63: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    xhash_put(comp->routes, pstrdup(xhash_pool(comp->routes), name->domain), (void *) comp);
                                                              ^~~~~~~~~~~~
../util/pool.h:105:50: note: passing argument to parameter 'src' here
JABBERD2_API char *pstrdup(pool_t p, const char *src); /* wrapper around strdup, gains mem from pool */
                                                 ^
router.c:309:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    _router_advertise(comp->r, name->domain, comp, 0);
                               ^~~~~~~~~~~~
router.c:51:49: note: passing argument to parameter 'domain' here
static void _router_advertise(router_t r, char *domain, component_t src, int unavail) {
                                                ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
router.c:316:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(strcmp(alias->target, name->domain) == 0) {
                                 ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
router.c:317:41: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            _route_add(comp->r->routes, name->domain, comp, route_MULTI_TO);
                                        ^~~~~~~~~~~~
router.c:159:48: note: passing argument to parameter 'name' here
static int _route_add(xht hroutes, const char *name, component_t comp, route_type_t rtype) {
                                               ^
router.c:336:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (name = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:343:32: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(xhash_get(comp->routes, name->domain) == NULL) {
                               ^~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:352:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    xhash_zap(comp->r->log_sinks, name->domain);
                                  ^~~~~~~~~~~~
../util/xhash.h:63:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_zap(xht h, const char *key);
                                               ^
router.c:353:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    _route_remove(comp->r->routes, name->domain, comp);
                                   ^~~~~~~~~~~~
router.c:179:52: note: passing argument to parameter 'name' here
static void _route_remove(xht hroutes, const char *name, component_t comp) {
                                                   ^
router.c:354:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    xhash_zap(comp->routes, name->domain);
                            ^~~~~~~~~~~~
../util/xhash.h:63:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_zap(xht h, const char *key);
                                               ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
router.c:356:73: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(comp->r->default_route != NULL && strcmp(comp->r->default_route, name->domain) == 0) {
                                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
router.c:368:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(xhash_get(comp->r->routes, name->domain) == NULL)
                                  ^~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:369:36: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        _router_advertise(comp->r, name->domain, comp, 1);
                                   ^~~~~~~~~~~~
router.c:51:49: note: passing argument to parameter 'domain' here
static void _router_advertise(router_t r, char *domain, component_t src, int unavail) {
                                                ^
router.c:437:39: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(ato >= 0) to = jid_reset(&sto, NAD_AVAL(nad, ato), NAD_AVAL_L(nad, ato));
                                      ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:438:45: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(afrom >= 0) from = jid_reset(&sfrom, NAD_AVAL(nad, afrom), NAD_AVAL_L(nad, afrom));
                                            ^~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:452:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(xhash_get(comp->routes, from->domain) == NULL) {
                                   ^~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:464:51: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(ato >= 0) to = jid_reset(&sto, NAD_AVAL(nad, ato), NAD_AVAL_L(nad, ato));
                                                  ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:475:46: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        targets = xhash_get(comp->r->routes, to->domain);
                                             ^~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
router.c:477:57: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(comp->r->default_route != NULL && strcmp(from->domain, comp->r->default_route) == 0) {
                                                        ^~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
router.c:505:55: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(ato >= 0) to = jid_reset(&sto, NAD_AVAL(nad, ato), NAD_AVAL_L(nad, ato));
                                                      ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:508:59: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        if(ato >= 0) to = jid_reset(&sto, NAD_AVAL(nad, ato), NAD_AVAL_L(nad, ato));
                                                          ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:518:55: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    if(ato >= 0) to = jid_reset(&sto, NAD_AVAL(nad, ato), NAD_AVAL_L(nad, ato));
                                                      ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:529:43: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(to->node == NULL || strlen(to->node) == 0) {
                                          ^~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
router.c:540:29: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                shahash_raw(jid_user(to), hashval);
                            ^~~~~~~~~~~~
../util/util.h:127:43: note: passing argument to parameter 'str' here
JABBERD2_API void shahash_raw(const char* str, unsigned char hashval[20]);
                                          ^
router.c:580:44: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ((jid_route_from = jid_new(NAD_AVAL(nad, attr_route_from), NAD_AVAL_L(nad, attr_route_from))) != NULL) &&       // has valid JID source in route
                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:581:42: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ((jid_route_to = jid_new(NAD_AVAL(nad, attr_route_to), NAD_AVAL_L(nad, attr_route_to))) != NULL) &&             // has valid JID destination in route
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:584:42: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ((jid_msg_from = jid_new(NAD_AVAL(nad, attr_msg_from), NAD_AVAL_L(nad, attr_msg_from))) != NULL) &&     // has valid JID source in message 
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:585:40: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ((jid_msg_to = jid_new(NAD_AVAL(nad, attr_msg_to), NAD_AVAL_L(nad, attr_msg_to))) != NULL))                     // has valid JID dest in message
                                       ^~~~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:616:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if(xhash_get(comp->routes, from->domain) == NULL) {
                                   ^~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
router.c:885:54: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(attr < 0 || (to = jid_reset(&sto, NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                                     ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:892:58: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(attr < 0 || (from = jid_reset(&sfrom, NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                                         ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:87:76: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_reset(jid_t jid, const unsigned char *id, int len);
                                                                           ^
router.c:923:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                nad_set_attr(nad, 0, -1, "to", to->domain, 0);
                                               ^~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
router.c:924:50: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                nad_set_attr(nad, 0, -1, "from", from->domain, 0);
                                                 ^~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
router.c:1087:58: warning: passing 'int *' to parameter of type 'socklen_t *' (aka 'unsigned int *') converts between pointers to integer types with different sign [-Wpointer-sign]
            getpeername(fd->fd, (struct sockaddr *) &sa, &namelen);
                                                         ^~~~~~~~
/usr/include/x86_64-linux-gnu/sys/socket.h:142:26: note: passing argument to parameter '__len' here
                        socklen_t *__restrict __len) __THROW;
                                              ^
router.c:1177:20: warning: incompatible pointer to integer conversion assigning to 'long' from 'char *' [-Wint-conversion]
    nad_body_start = nad_body;
                   ^ ~~~~~~~~
router.c:1180:36: warning: ordered comparison between pointer and integer ('char *' and 'long')
    for (body_count = 0; (nad_body < nad_body_start + nad_body_len) && (body_count < (MAX_MESSAGE*2)-3); nad_body++) {
                          ~~~~~~~~ ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
68 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o user.o user.c
user.c:40:14: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    userfile = config_get_one(r->config, "local.users", 0);
             ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 warning generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o filter.o filter.c
filter.c:56:16: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    filterfile = config_get_one(r->config, "aci.filter", 0);
               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
filter.c:190:12: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        to = (char *) malloc(sizeof(char) * (NAD_AVAL_L(nad, ato) + 1));
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
filter.c:191:17: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sprintf(to, "%.*s", NAD_AVAL_L(nad, ato), NAD_AVAL(nad, ato));
                ^~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
filter.c:192:22: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        cur = strstr(to, "@");       /* skip node part */
                     ^~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:192:13: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        cur = strstr(to, "@");       /* skip node part */
            ^ ~~~~~~~~~~~~~~~
filter.c:194:26: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(cur, "/");
                         ^~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:194:17: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(cur, "/");
                ^ ~~~~~~~~~~~~~~~~
filter.c:196:26: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(to, "/");
                         ^~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:196:17: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(to, "/");
                ^ ~~~~~~~~~~~~~~~
filter.c:200:14: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        from = (char *) malloc(sizeof(char) * (NAD_AVAL_L(nad, afrom) + 1));
             ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
filter.c:201:17: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sprintf(from, "%.*s", NAD_AVAL_L(nad, afrom), NAD_AVAL(nad, afrom));
                ^~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
filter.c:202:22: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        cur = strstr(from, "@");
                     ^~~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:202:13: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        cur = strstr(from, "@");
            ^ ~~~~~~~~~~~~~~~~~
filter.c:204:26: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(cur, "/");
                         ^~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:204:17: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(cur, "/");
                ^ ~~~~~~~~~~~~~~~~
filter.c:206:26: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(from, "/");
                         ^~~~
/usr/include/string.h:338:34: note: passing argument to parameter '__haystack' here
extern char *strstr (const char *__haystack, const char *__needle)
                                 ^
filter.c:206:17: warning: assigning to 'unsigned char *' from 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            cur = strstr(from, "/");
                ^ ~~~~~~~~~~~~~~~~~
filter.c:215:69: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if( from != NULL && acl->from != NULL && fnmatch(acl->from, from, 0) != 0 ) continue;        /* do filename-like match */
                                                                    ^~~~
/usr/include/fnmatch.h:56:56: note: passing argument to parameter '__name' here
extern int fnmatch (const char *__pattern, const char *__name, int __flags);
                                                       ^
filter.c:216:63: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if( to != NULL && acl->to != NULL && fnmatch(acl->to, to, 0) != 0 ) continue;
                                                              ^~
/usr/include/fnmatch.h:56:56: note: passing argument to parameter '__name' here
extern int fnmatch (const char *__pattern, const char *__name, int __flags);
                                                       ^
19 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o router aci.o main.o router.o user.o filter.o ../sx/libsx.la ../mio/libmio.la ../util/libutil.la ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/router'
Making all in s2s
make[3]: Entering directory `/«PKGBUILDDIR»/s2s'
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o in.o in.c
in.c:113:58: warning: passing 'int *' to parameter of type 'socklen_t *' (aka 'unsigned int *') converts between pointers to integer types with different sign [-Wpointer-sign]
            getpeername(fd->fd, (struct sockaddr *) &sa, &namelen);
                                                         ^~~~~~~~
/usr/include/x86_64-linux-gnu/sys/socket.h:142:26: note: passing argument to parameter '__len' here
                        socklen_t *__restrict __len) __THROW;
                                              ^
in.c:328:44: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                           ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:334:84: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            if (in->s2s->enable_whitelist > 0 && (s2s_domain_in_whitelist(in->s2s, from->domain) == 0)) {
                                                                                   ^~~~~~~~~~~~
./s2s.h:351:58: note: passing argument to parameter 'in_domain' here
int             s2s_domain_in_whitelist(s2s_t s2s, char *in_domain);
                                                         ^
in.c:367:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:374:34: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:381:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                               ^~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
in.c:381:44: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                                           ^~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
in.c:433:39: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_append_attr(verify, -1, "to", from->domain);
                                      ^~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
in.c:434:41: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_append_attr(verify, -1, "from", to->domain);
                                        ^~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
in.c:461:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:468:34: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:497:53: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    dbkey = s2s_db_key(NULL, in->s2s->local_secret, from->domain, id);
                                                    ^~~~~~~~~~~~
./s2s.h:355:59: note: passing argument to parameter 'remote' here
char            *s2s_db_key(pool_t p, char *secret, char *remote, char *id);
                                                          ^
in.c:536:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:543:34: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
in.c:550:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                               ^~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
in.c:550:44: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                                           ^~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
in.c:605:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_set_attr(nad, 0, -1, "to", to->domain, 0);
                                   ^~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
17 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o main.o main.c
main.c:54:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pidfile = config_get_one(s2s->config, "pidfile", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:84:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->id = config_get_one(s2s->config, "id", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:88:20: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->router_ip = config_get_one(s2s->config, "router.ip", 0);
                   ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:94:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->router_user = config_get_one(s2s->config, "router.user", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:97:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->router_pass = config_get_one(s2s->config, "router.pass", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:101:25: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->router_pemfile = config_get_one(s2s->config, "router.pemfile", 0);
                        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:121:27: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        s2s->log_facility = config_get_one(s2s->config, "log.facility", 0);
                          ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:122:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        s2s->log_ident = config_get_one(s2s->config, "log.ident", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:126:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        s2s->log_ident = config_get_one(s2s->config, "log.file", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:128:23: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->packet_stats = config_get_one(s2s->config, "stats.packet", 0);
                      ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:138:19: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->local_ip = config_get_one(s2s->config, "local.ip", 0);
                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:166:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->local_pemfile = config_get_one(s2s->config, "local.pemfile", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:167:24: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    s2s->local_cachain = config_get_one(s2s->config, "local.cachain", 0);
                       ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
main.c:178:9: warning: implicit declaration of function '_s2s_populate_whitelist_domains' is invalid in C99 [-Wimplicit-function-declaration]
        _s2s_populate_whitelist_domains(s2s, elem->values, elem->nvalues);
        ^
main.c:1064:21: warning: ignoring return value of function declared with warn_unused_result attribute [-Wunused-result]
                    write(fd, buf, len);
                    ^~~~~ ~~~~~~~~~~~~
15 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o out.o out.c
out.c:113:38: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    char *rkey = s2s_route_key(NULL, pkt->from->domain, pkt->to->domain);
                                     ^~~~~~~~~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
out.c:113:57: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    char *rkey = s2s_route_key(NULL, pkt->from->domain, pkt->to->domain);
                                                        ^~~~~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
out.c:620:43: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            (s2s_domain_in_whitelist(s2s, pkt->to->domain) == 0)) {
                                          ^~~~~~~~~~~~~~~
./s2s.h:351:58: note: passing argument to parameter 'in_domain' here
int             s2s_domain_in_whitelist(s2s_t s2s, char *in_domain);
                                                         ^
out.c:634:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, pkt->from->domain, pkt->to->domain);
                               ^~~~~~~~~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
out.c:634:51: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, pkt->from->domain, pkt->to->domain);
                                                  ^~~~~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
out.c:1646:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
out.c:1653:34: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
out.c:1660:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                               ^~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
out.c:1660:44: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                                           ^~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
out.c:1716:36: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                   ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
out.c:1723:34: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(attr < 0 || (to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr))) == NULL) {
                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
out.c:1749:32: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                               ^~~~~~~~~~
./s2s.h:353:48: note: passing argument to parameter 'local' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                               ^
out.c:1749:44: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rkey = s2s_route_key(NULL, to->domain, from->domain);
                                           ^~~~~~~~~~~~
./s2s.h:353:61: note: passing argument to parameter 'remote' here
char            *s2s_route_key(pool_t p, char *local, char *remote);
                                                            ^
out.c:1773:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_append_attr(nad, -1, "to", from->domain);
                                   ^~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
out.c:1774:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_append_attr(nad, -1, "from", to->domain);
                                     ^~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
15 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o router.o router.c
router.c:257:37: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt->from = jid_new(NAD_AVAL(pkt->nad, attr), NAD_AVAL_L(pkt->nad, attr));
                                    ^~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:260:37: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt->from = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr));
                                    ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:264:35: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt->to = jid_new(NAD_AVAL(pkt->nad, attr), NAD_AVAL_L(pkt->nad, attr));
                                  ^~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
router.c:267:35: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt->to = jid_new(NAD_AVAL(nad, attr), NAD_AVAL_L(nad, attr));
                                  ^~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
4 warnings generated.
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o db.o db.c
gcc -DHAVE_CONFIG_H -I. -I.. -DCONFIG_DIR=\"/etc/jabberd2\"  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o util.o util.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o s2s in.o main.o out.o router.o db.o util.o ../sx/libsx.la ../mio/libmio.la ../util/libutil.la ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/s2s'
Making all in storage
make[3]: Entering directory `/«PKGBUILDDIR»/storage'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o libstorage_la-storage.lo `test -f 'storage.c' || echo './'`storage.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -DLIBRARY_DIR=\"/usr/lib/x86_64-linux-gnu/jabberd2\" -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o libstorage_la-object.lo `test -f 'object.c' || echo './'`object.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char  -fPIE -pie -Wl,-z,relro -Wl,-z,now -o libstorage.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 libstorage_la-storage.lo libstorage_la-object.lo  -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_anon.lo authreg_anon.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_anon.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_anon.lo -lexpat -L../util -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_db.lo authreg_db.c
authreg_db.c:293:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    path = config_get_one(ar->c2s->config, "authreg.db.path", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_db.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_db.lo -lexpat -L../util -ldb -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_db.lo storage_db.c
storage_db.c:530:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    path = config_get_one(drv->st->config, "storage.db.path", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_db.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_db.lo -lexpat -L../util -ldb ../util/libutil.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_fs.lo storage_fs.c
storage_fs.c:500:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    path = config_get_one(drv->st->config, "storage.fs.path", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_fs.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_fs.lo -lexpat -L../util -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_ldap.lo authreg_ldap.c
authreg_ldap.c:146:16: warning: incompatible pointer to integer conversion returning 'void *' from a function with result type 'int' [-Wint-conversion]
        return NULL;
               ^~~~
/usr/bin/../lib/clang/3.4/include/stddef.h:77:16: note: expanded from macro 'NULL'
#  define NULL ((void*)0)
               ^~~~~~~~~~
authreg_ldap.c:161:63: warning: format specifies type 'int' but the argument has type 'long' [-Wformat]
      snprintf(url, sizeof(url), "ldaps://%s:%d", data->host, data->port);
                                             ~~               ^~~~~~~~~~
                                             %ld
/usr/include/x86_64-linux-gnu/bits/stdio2.h:70:8: note: expanded from macro 'snprintf'
                            __VA_ARGS__)
                            ^
authreg_ldap.c:421:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    host = config_get_one(ar->c2s->config, ldap_entry, 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldap.c:524:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->binddn = config_get_one(ar->c2s->config, ldap_entry, 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldap.c:530:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        data->bindpw = config_get_one(ar->c2s->config, ldap_entry, 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldap.c:536:19: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->uidattr = config_get_one(ar->c2s->config, ldap_entry, 0);
                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldap.c:544:17: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->query = config_get_one(ar->c2s->config, ldap_entry, 0);
                ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
7 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_ldap.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_ldap.lo -lexpat -L../util -llber -lldap -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_ldapfull.lo authreg_ldapfull.c
authreg_ldapfull.c:237:37: warning: passing 'char *' to parameter of type 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rc = EVP_DecodeUpdate(&EVP_ctx, text, &i, (char *)src, strlen(src));
                                    ^~~~
/usr/include/openssl/evp.h:642:57: note: passing argument to parameter 'out' here
int     EVP_DecodeUpdate(EVP_ENCODE_CTX *ctx,unsigned char *out,int *outl,
                                                            ^
authreg_ldapfull.c:237:43: warning: passing 'unsigned int *' to parameter of type 'int *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rc = EVP_DecodeUpdate(&EVP_ctx, text, &i, (char *)src, strlen(src));
                                          ^~
/usr/include/openssl/evp.h:642:66: note: passing argument to parameter 'outl' here
int     EVP_DecodeUpdate(EVP_ENCODE_CTX *ctx,unsigned char *out,int *outl,
                                                                     ^
authreg_ldapfull.c:237:47: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rc = EVP_DecodeUpdate(&EVP_ctx, text, &i, (char *)src, strlen(src));
                                              ^~~~~~~~~~~
/usr/include/openssl/evp.h:643:24: note: passing argument to parameter 'in' here
                const unsigned char *in, int inl);
                                     ^
authreg_ldapfull.c:238:12: warning: comparison of unsigned expression < 0 is always false [-Wtautological-compare]
    if (rc < 0) {
        ~~ ^ ~
authreg_ldapfull.c:243:31: warning: passing 'char *' to parameter of type 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_DecodeFinal(&EVP_ctx, text, &i); 
                              ^~~~
/usr/include/openssl/evp.h:645:9: note: passing argument to parameter 'out' here
                char *out, int *outl);
                      ^
authreg_ldapfull.c:243:37: warning: passing 'unsigned int *' to parameter of type 'int *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_DecodeFinal(&EVP_ctx, text, &i); 
                                    ^~
/usr/include/openssl/evp.h:645:19: note: passing argument to parameter 'outl' here
                char *out, int *outl);
                                ^
authreg_ldapfull.c:264:32: warning: passing 'char *' to parameter of type 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_EncodeUpdate(&EVP_ctx, text, &tlen, (char *)src, srclen);
                               ^~~~
/usr/include/openssl/evp.h:636:58: note: passing argument to parameter 'out' here
void    EVP_EncodeUpdate(EVP_ENCODE_CTX *ctx,unsigned char *out,int *outl,
                                                            ^
authreg_ldapfull.c:264:45: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_EncodeUpdate(&EVP_ctx, text, &tlen, (char *)src, srclen);
                                            ^~~~~~~~~~~
/usr/include/openssl/evp.h:637:24: note: passing argument to parameter 'in' here
                const unsigned char *in,int inl);
                                     ^
authreg_ldapfull.c:265:31: warning: passing 'char *' to parameter of type 'unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_EncodeFinal(&EVP_ctx, text, &tlen); 
                              ^~~~
/usr/include/openssl/evp.h:638:57: note: passing argument to parameter 'out' here
void    EVP_EncodeFinal(EVP_ENCODE_CTX *ctx,unsigned char *out,int *outl);
                                                           ^
authreg_ldapfull.c:337:37: warning: passing 'int *' to parameter of type 'unsigned int *' converts between pointers to integer types with different sign [-Wpointer-sign]
    EVP_DigestFinal(&mdctx, digest, &dlen);
                                    ^~~~~
/usr/include/openssl/evp.h:565:69: note: passing argument to parameter 's' here
int     EVP_DigestFinal(EVP_MD_CTX *ctx,unsigned char *md,unsigned int *s);
                                                                        ^
authreg_ldapfull.c:343:34: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    rc = _ldapfull_base64_encode(digest, dlen+saltlen, &hash, &hlen);
                                 ^~~~~~
authreg_ldapfull.c:253:42: note: passing argument to parameter 'src' here
int _ldapfull_base64_encode( const char *src, int srclen, char **ret, int *rlen ) {
                                         ^
authreg_ldapfull.c:404:31: warning: passing 'unsigned char [3]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    encrypted = crypt(passwd, salt);
                              ^~~~
/usr/include/unistd.h:1142:52: note: passing argument to parameter '__salt' here
extern char *crypt (const char *__key, const char *__salt)
                                                   ^
authreg_ldapfull.c:802:9: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    uri = config_get_one(ar->c2s->config, "authreg.ldapfull.uri", 0);
        ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:816:15: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    srvtype_s = config_get_one(ar->c2s->config, "authreg.ldapfull.type", 0);
              ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:849:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->binddn = config_get_one(ar->c2s->config, "authreg.ldapfull.binddn", 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:851:22: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
        data->bindpw = config_get_one(ar->c2s->config, "authreg.ldapfull.bindpw", 0);
                     ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:853:19: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->uidattr = config_get_one(ar->c2s->config, "authreg.ldapfull.uidattr", 0);
                  ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:857:21: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->validattr = config_get_one(ar->c2s->config, "authreg.ldapfull.validattr", 0);
                    ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:859:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->pwattr = config_get_one(ar->c2s->config, "authreg.ldapfull.pwattr", 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:863:20: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->pwscheme = config_get_one(ar->c2s->config, "authreg.ldapfull.pwscheme", 0);
                   ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_ldapfull.c:871:23: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->objectclass = config_get_one(ar->c2s->config, "authreg.ldapfull.objectclass", 0);
                      ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
21 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_ldapfull.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_ldapfull.lo -lexpat -L../util -llber -lldap -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_ldapvcard.lo storage_ldapvcard.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_ldapvcard.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_ldapvcard.lo -lexpat -L../util -llber -lldap ../util/libutil.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing   -g -DNDEBUG -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_mysql_la-authreg_mysql.lo `test -f 'authreg_mysql.c' || echo './'`authreg_mysql.c
authreg_mysql.c:366:12: warning: initializing 'char *' with an expression of type 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    char * value = config_get_one( c, key, 0 );
           ^       ~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_mysql.c:528:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    host = config_get_one(ar->c2s->config, "authreg.mysql.host", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_mysql.c:529:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    port = config_get_one(ar->c2s->config, "authreg.mysql.port", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_mysql.c:530:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    dbname = config_get_one(ar->c2s->config, "authreg.mysql.dbname", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_mysql.c:531:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    user = config_get_one(ar->c2s->config, "authreg.mysql.user", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_mysql.c:532:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pass = config_get_one(ar->c2s->config, "authreg.mysql.pass", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
6 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_mysql.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_mysql_la-authreg_mysql.lo -lexpat -L../util -L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -ldl -lcrypt -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -I/usr/include/mysql -DBIG_JOINS=1  -fno-strict-aliasing   -g -DNDEBUG -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_mysql_la-storage_mysql.lo `test -f 'storage_mysql.c' || echo './'`storage_mysql.c
storage_mysql.c:586:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    host = config_get_one(drv->st->config, "storage.mysql.host", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_mysql.c:587:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    port = config_get_one(drv->st->config, "storage.mysql.port", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_mysql.c:588:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    dbname = config_get_one(drv->st->config, "storage.mysql.dbname", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_mysql.c:589:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    user = config_get_one(drv->st->config, "storage.mysql.user", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_mysql.c:590:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pass = config_get_one(drv->st->config, "storage.mysql.pass", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_mysql.c:625:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->prefix = config_get_one(drv->st->config, "storage.mysql.prefix", 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
6 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_mysql.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_mysql_la-storage_mysql.lo -lexpat -L../util -L/usr/lib/x86_64-linux-gnu -lmysqlclient -lpthread -lz -lm -ldl -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_pam.lo authreg_pam.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_pam.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_pam.lo -lexpat -L../util -lpam -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -I/usr/include/postgresql -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_pgsql_la-authreg_pgsql.lo `test -f 'authreg_pgsql.c' || echo './'`authreg_pgsql.c
authreg_pgsql.c:344:12: warning: initializing 'char *' with an expression of type 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    char * value = config_get_one( c, key, 0 );
           ^       ~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:509:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    host = config_get_one(ar->c2s->config, "authreg.pgsql.host", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:510:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    port = config_get_one(ar->c2s->config, "authreg.pgsql.port", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:511:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    dbname = config_get_one(ar->c2s->config, "authreg.pgsql.dbname", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:512:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    user = config_get_one(ar->c2s->config, "authreg.pgsql.user", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:513:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pass = config_get_one(ar->c2s->config, "authreg.pgsql.pass", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_pgsql.c:514:14: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    conninfo = config_get_one(ar->c2s->config,"authreg.pgsql.conninfo",0);
             ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
7 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_pgsql.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_pgsql_la-authreg_pgsql.lo -lexpat -L../util -L/usr/lib -lpq -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s -I/usr/include/postgresql -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_pgsql_la-storage_pgsql.lo `test -f 'storage_pgsql.c' || echo './'`storage_pgsql.c
storage_pgsql.c:642:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    host = config_get_one(drv->st->config, "storage.pgsql.host", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:643:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    port = config_get_one(drv->st->config, "storage.pgsql.port", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:644:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    dbname = config_get_one(drv->st->config, "storage.pgsql.dbname", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:645:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    user = config_get_one(drv->st->config, "storage.pgsql.user", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:646:10: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    pass = config_get_one(drv->st->config, "storage.pgsql.pass", 0);
         ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:647:14: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    conninfo = config_get_one(drv->st->config, "storage.pgsql.conninfo",0);
             ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_pgsql.c:672:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->prefix = config_get_one(drv->st->config, "storage.pgsql.prefix", 0);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
7 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_pgsql.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_pgsql_la-storage_pgsql.lo -lexpat -L../util -L/usr/lib -lpq -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_pipe.lo authreg_pipe.c
authreg_pipe.c:259:16: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->exec = config_get_one(ar->c2s->config, "authreg.pipe.exec", 0);
               ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1 warning generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_pipe.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_pipe.lo -lexpat -L../util ../util/libutil.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o authreg_sqlite.lo authreg_sqlite.c
authreg_sqlite.c:289:11: warning: initializing 'char *' with an expression of type 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    char *dbname = config_get_one(ar->c2s->config, "authreg.sqlite.dbname", 0);
          ^        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
authreg_sqlite.c:324:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    busy_timeout = config_get_one(ar->c2s->config,
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
2 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o authreg_sqlite.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 authreg_sqlite.lo -lexpat -L../util -lsqlite3 -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I.. -I../c2s  -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o storage_sqlite.lo storage_sqlite.c
storage_sqlite.c:152:51: warning: passing 'unsigned int *' to parameter of type 'int *' converts between pointers to integer types with different sign [-Wpointer-sign]
    _st_sqlite_convert_filter_recursive (f, &buf, &buflen, &nbuf);
                                                  ^~~~~~~
storage_sqlite.c:81:13: note: passing argument to parameter 'buflen' here
                                                 int *buflen, int *nbuf) {
                                                      ^
storage_sqlite.c:152:60: warning: passing 'unsigned int *' to parameter of type 'int *' converts between pointers to integer types with different sign [-Wpointer-sign]
    _st_sqlite_convert_filter_recursive (f, &buf, &buflen, &nbuf);
                                                           ^~~~~
storage_sqlite.c:81:26: note: passing argument to parameter 'nbuf' here
                                                 int *buflen, int *nbuf) {
                                                                   ^
storage_sqlite.c:484:7: warning: assigning to 'const char *' from 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                val = sqlite3_column_text (stmt, i);
                    ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_sqlite.c:686:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    dbname = config_get_one (drv->st->config,
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_sqlite.c:713:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    busy_timeout = config_get_one (drv->st->config,
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
storage_sqlite.c:719:18: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    data->prefix = config_get_one (drv->st->config,
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
6 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -avoid-version -fPIE -pie -Wl,-z,relro -Wl,-z,now -o storage_sqlite.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 storage_sqlite.lo -lexpat -L../util -lsqlite3 -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
make[3]: Leaving directory `/«PKGBUILDDIR»/storage'
Making all in sm
make[3]: Entering directory `/«PKGBUILDDIR»/sm'
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_active.lo mod_active.c
mod_active.c:35:44: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(user->sm->st, "active", jid_user(user->jid), NULL, &os) == st_SUCCESS && os_iter_first(os)) {
                                           ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_active.c:58:39: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_put(mi->sm->st, "active", jid_user(jid), os);
                                      ^~~~~~~~~~~~~
../storage/storage.h:221:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_put(storage_t st, const char *type, const char *owner, os_t os);
                                                                               ^
mod_active.c:67:42: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "active", jid_user(jid), NULL);
                                         ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
3 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_active.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_active.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_announce.lo mod_announce.c
mod_announce.c:132:35: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        _announce_load(mod, data, sess->user->jid->domain);
                                  ^~~~~~~~~~~~~~~~~~~~~~~
mod_announce.c:46:70: note: passing argument to parameter 'domain' here
static void _announce_load(module_t mod, moddata_t data, const char *domain) {
                                                                     ^
mod_announce.c:141:58: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
           storage_get(sess->user->sm->st, "motd-times", jid_user(sess->jid), NULL, &os) == st_SUCCESS) {
                                                         ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_announce.c:157:68: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "to", jid_full(sess->jid), strlen(jid_full(sess->jid)));
                                                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:157:40: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "to", jid_full(sess->jid), strlen(jid_full(sess->jid)));
                                       ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_announce.c:158:74: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "from", sess->user->jid->domain, strlen(sess->user->jid->domain));
                                                                         ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:158:42: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "from", sess->user->jid->domain, strlen(sess->user->jid->domain));
                                         ^~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_announce.c:168:59: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        storage_replace(sess->user->sm->st, "motd-times", jid_user(sess->jid), NULL, data->tos);
                                                          ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_announce.c:187:68: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "to", jid_full(sess->jid), strlen(jid_full(sess->jid)));
                                                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:187:40: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "to", jid_full(sess->jid), strlen(jid_full(sess->jid)));
                                       ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_announce.c:188:68: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "from", sess->jid->domain, strlen(sess->jid->domain));
                                                                   ^~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:188:42: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(nad, 1, -1, "from", sess->jid->domain, strlen(sess->jid->domain));
                                         ^~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_announce.c:193:59: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        storage_replace(sess->user->sm->st, "motd-times", jid_user(sess->jid), NULL, data->tos);
                                                          ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_announce.c:218:59: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jid_reset_components(jid, jid->node, jid->domain, data->announce_resource);
                                                          ^~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
mod_announce.c:219:62: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                             ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_announce.c:219:83: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                                                  ^~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_announce.c:223:59: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jid_reset_components(jid, jid->node, jid->domain, data->online_resource);
                                                          ^~~~~~~~~~~~~~~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
mod_announce.c:224:62: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                             ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_announce.c:224:83: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                                                  ^~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_announce.c:229:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:899:21: note: expanded from macro 'strncmp'
                       && strlen (s1) < ((size_t) (n)))                       \
                                  ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:15: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                            ^
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_announce.c:229:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strlen(pkt->to->resource) < 8 || strncmp(pkt->to->resource, data->announce_resource, 8) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:902:34: note: expanded from macro 'strncmp'
                  ? strcmp (s1, s2) : strncmp (s1, s2, n)))
                                               ^
/usr/include/string.h:143:33: note: passing argument to parameter '__s1' here
extern int strncmp (const char *__s1, const char *__s2, size_t __n)
                                ^
mod_announce.c:250:29: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_delay(store, t, pkt->to->domain);
                            ^~~~~~~~~~~~~~~
./sm.h:305:67: note: passing argument to parameter 'from' here
SM_API void            pkt_delay(pkt_t pkt, time_t t, const char *from);
                                                                  ^
mod_announce.c:259:64: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        ret = storage_replace(mod->mm->sm->st, "motd-message", pkt->to->domain, NULL, os);
                                                               ^~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_announce.c:291:20: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    else if(strcmp(&(pkt->to->resource[8]), "/online") != 0) {
                   ^~~~~~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_announce.c:314:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "motd-times", jid_user(jid), NULL);
                                             ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
36 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_announce.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_announce.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_amp.lo mod_amp.c
mod_amp.c:79:58: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_t res = pkt_create(pkt->sm, "message", NULL, jid_full(pkt->from), jid_full(pkt->to));
                                                         ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_amp.c:79:79: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_t res = pkt_create(pkt->sm, "message", NULL, jid_full(pkt->from), jid_full(pkt->to));
                                                                              ^~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_amp.c:85:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_append_attr(res->nad, -1, "from", jid_full(pkt->from));
                                              ^~~~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_amp.c:86:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_append_attr(res->nad, -1, "to",  jid_full(pkt->to));
                                             ^~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_amp.c:110:80: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                               ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_amp.c:110:99: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                  ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_amp.c:204:38: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (sess_match(user, pkt->to->resource)) /* resource found */
                                     ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_amp.c:218:39: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if (!sess_match(user, pkt->to->resource)) /* resource not found */
                                      ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_amp.c:327:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    res = pkt_create(config->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                 ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_amp.c:327:71: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    res = pkt_create(config->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                                      ^~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_amp.c:387:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableactions.drop", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:392:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableactions.error", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:397:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableactions.alert", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:402:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableactions.notify", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:407:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableconditions.deliver", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:412:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableconditions.expireat", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:417:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.disableconditions.matchresource", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:422:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "amp.offlinestoragedisabled", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_amp.c:427:12: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    option = config_get_one(mod->mm->sm->config, "offline.dropmessages", 0);
           ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
29 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_amp.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_amp.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_deliver.lo mod_deliver.c
mod_deliver.c:38:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(pkt->nad, 1, -1, "from", jid_full(pkt->from), 0);
                                              ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_deliver.c:58:45: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(pkt->nad, 1, -1, "to", jid_full(pkt->to), 0);
                                            ^~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_deliver.c:74:33: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess = sess_match(user, pkt->to->resource);
                                ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
3 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_deliver.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_deliver.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_disco.lo mod_disco.c
mod_disco.c:84:24: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(xhash_get(dest, jid_full(svc->jid)) != NULL)
                       ^~~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_disco.c:89:21: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    xhash_put(dest, jid_full(svc->jid), (void *) svc);
                    ^~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
mod_disco.c:123:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_append_attr(pkt->nad, -1, "jid", jid_full(svc->jid));
                                                 ^~~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_disco.c:185:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_append_attr(pkt->nad, -1, "jid", jid_full(svc->jid));
                                                 ^~~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_disco.c:261:29: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    svc = xhash_get(d->dyn, jid_full(pkt->from));
                            ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_disco.c:272:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_put(d->dyn, jid_full(svc->jid), (void *) svc);
                          ^~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_disco.c:326:34: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                 ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_disco.c:326:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->to)))
                                                      ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_disco.c:359:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_append_attr(pkt->nad, -1, "jid", jid_full(sess->jid));
                                                 ^~~~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_disco.c:376:38: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(xhash_get(mod->mm->sm->hosts, pkt->to->domain) == NULL)
                                     ^~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_disco.c:393:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            result = pkt_dup(d->disco_info_result, jid_full(pkt->from), jid_full(pkt->to));
                                                   ^~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_disco.c:393:73: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            result = pkt_dup(d->disco_info_result, jid_full(pkt->from), jid_full(pkt->to));
                                                                        ^~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_disco.c:413:62: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            result = pkt_create(mod->mm->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                             ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_disco.c:413:83: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            result = pkt_create(mod->mm->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                                                  ^~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_disco.c:443:44: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_dup(d->agents_result, jid_full(pkt->from), jid_full(pkt->to));
                                           ^~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_disco.c:443:65: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_dup(d->agents_result, jid_full(pkt->from), jid_full(pkt->to));
                                                                ^~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_disco.c:456:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_dup(d->disco_items_result, jid_full(pkt->from), jid_full(pkt->to));
                                                ^~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_disco.c:456:70: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_dup(d->disco_items_result, jid_full(pkt->from), jid_full(pkt->to));
                                                                     ^~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_disco.c:463:53: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_append_attr(result->nad, -1, "jid", jid_full(result->from));
                                                    ^~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:161:83: note: passing argument to parameter 'val' here
JABBERD2_API int nad_append_attr(nad_t nad, int ns, const char *name, const char *val);
                                                                                  ^
mod_disco.c:479:58: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_create(mod->mm->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                         ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_disco.c:479:79: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        result = pkt_create(mod->mm->sm, "iq", "result", jid_full(pkt->from), jid_full(pkt->to));
                                                                              ^~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_disco.c:547:56: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        request = pkt_create(mod->mm->sm, "iq", "get", jid_full(pkt->from), mod->mm->sm->id);
                                                       ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_disco.c:561:29: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    svc = xhash_get(d->dyn, jid_full(pkt->from));
                            ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_disco.c:566:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_zap(d->dyn, jid_full(pkt->from));
                          ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:63:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_zap(xht h, const char *key);
                                               ^
mod_disco.c:627:17: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    d->category = config_get_one(mod->mm->sm->config, "discovery.identity.category", 0);
                ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_disco.c:629:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    d->type = config_get_one(mod->mm->sm->config, "discovery.identity.type", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_disco.c:631:13: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    d->name = config_get_one(mod->mm->sm->config, "discovery.identity.name", 0);
            ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_disco.c:677:28: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        svc->jid = jid_new(NAD_AVAL(nad, jid), NAD_AVAL_L(nad, jid));
                           ^~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_disco.c:680:28: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_put(d->stat, jid_full(svc->jid), (void *) svc);
                           ^~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
39 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_disco.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_disco.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_echo.lo mod_echo.c
mod_echo.c:41:59: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        jid_reset_components(jid, jid->node, jid->domain, resource);
                                                          ^~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
mod_echo.c:42:66: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mi->mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                                 ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_echo.c:42:87: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mi->mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(jid)));
                                                                                      ^~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_echo.c:47:45: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || strcmp(pkt->to->resource, "echo") != 0)
                                            ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
9 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_echo.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_echo.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_help.lo mod_help.c
mod_help.c:54:61: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid_reset_components(smjid, smjid->node, smjid->domain, resource);
                                                            ^~~~~~~~
../util/jid.h:88:143: note: passing argument to parameter 'resource' here
JABBERD2_API jid_t               jid_reset_components(jid_t jid, const unsigned char *node, const unsigned char *domain, const unsigned char *resource);
                                                                                                                                              ^
mod_help.c:61:62: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(smjid)));
                                                             ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_help.c:61:83: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", NULL, jid_user(pkt->from), jid_full(smjid)));
                                                                                  ^~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_help.c:67:78: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_MESSAGE) || (pkt->to->resource[0] != '\0' && strcmp(pkt->to->resource, "help")))
                                                                             ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_help.c:83:45: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    subjectl = strlen(org_subject) + strlen(jid_full(pkt->from)) + 8;
                                            ^~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_help.c:110:33: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_dup(pkt, jid_full(jid), jid_user(pkt->to)));
                                ^~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_help.c:110:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_dup(pkt, jid_full(jid), jid_user(pkt->to)));
                                               ^~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_help.c:117:37: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            pkt_router(pkt_dup(pkt, jid_full(jid), jid_user(pkt->to)));
                                    ^~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_help.c:117:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            pkt_router(pkt_dup(pkt, jid_full(jid), jid_user(pkt->to)));
                                                   ^~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
14 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_help.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_help.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_last.lo mod_iq_last.c
mod_iq_last.c:84:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = storage_get(user->sm->st, "logout", jid_user(user->jid), NULL, &os);
                                              ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_iq_last.c:132:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_replace(sess->user->sm->st, "logout", jid_user(sess->jid), NULL, os);
                                                  ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_iq_last.c:140:42: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "logout", jid_user(jid), NULL);
                                         ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
3 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-last.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_last.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_ping.lo mod_iq_ping.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-ping.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_ping.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_private.lo mod_iq_private.c
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_iq_private.c:49:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_iq_private.c:49:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_iq_private.c:93:58: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        ret = storage_get(sess->user->sm->st, "private", jid_user(sess->jid), filter, &os);
                                                         ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_iq_private.c:153:58: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = storage_replace(sess->user->sm->st, "private", jid_user(sess->jid), filter, os);
                                                         ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_iq_private.c:179:43: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    result = pkt_dup(pkt, jid_full(sscan->jid), NULL);
                                          ^~~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_iq_private.c:201:43: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "private", jid_user(jid), NULL);
                                          ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
16 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-private.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_private.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_time.lo mod_iq_time.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-time.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_time.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_vcard.lo mod_iq_vcard.c
mod_iq_vcard.c:211:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        if (sm_storage_rate_limit(sess->user->sm, jid_user(sess->jid)))
                                                  ^~~~~~~~~~~~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_iq_vcard.c:214:56: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        ret = storage_get(sess->user->sm->st, "vcard", jid_user(sess->jid), NULL, &os);
                                                       ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_iq_vcard.c:252:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (sm_storage_rate_limit(sess->user->sm, jid_user(sess->jid)))
                                              ^~~~~~~~~~~~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_iq_vcard.c:255:56: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = storage_replace(sess->user->sm->st, "vcard", jid_user(sess->jid), NULL, os);
                                                       ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_iq_vcard.c:300:44: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = storage_get(mi->sm->st, "vcard", pkt->to->domain, NULL, &os);
                                           ^~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_iq_vcard.c:318:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_set_attr(result->nad, 1, -1, "to", jid_full(result->to), 0);
                                                   ^~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_iq_vcard.c:319:54: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_set_attr(result->nad, 1, -1, "from", jid_full(result->from), 0);
                                                     ^~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_iq_vcard.c:348:41: warning: incompatible pointer types passing 'jid_t' (aka 'struct jid_st *') to parameter of type 'const char *' [-Wincompatible-pointer-types]
    if (sm_storage_rate_limit(user->sm, pkt->from))
                                        ^~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_iq_vcard.c:351:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    ret = storage_get(user->sm->st, "vcard", jid_user(user->jid), NULL, &os);
                                             ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_iq_vcard.c:369:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_set_attr(result->nad, 1, -1, "to", jid_full(result->to), 0);
                                                   ^~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_iq_vcard.c:370:54: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            nad_set_attr(result->nad, 1, -1, "from", jid_full(result->from), 0);
                                                     ^~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_iq_vcard.c:389:41: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "vcard", jid_user(jid), NULL);
                                        ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
12 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-vcard.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_vcard.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_iq_version.lo mod_iq_version.c
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_iq-version.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_iq_version.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_offline.lo mod_offline.c
mod_offline.c:50:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        ret = storage_get(pkt->sm->st, "queue", jid_user(sess->jid), NULL, &os);
                                                ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_offline.c:96:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        storage_delete(pkt->sm->st, "queue", jid_user(sess->jid), NULL);
                                             ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_offline.c:132:35: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            pkt_sess(pkt_dup(pkt, jid_full(scan->jid), jid_full(pkt->from)), scan);
                                  ^~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_offline.c:132:56: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            pkt_sess(pkt_dup(pkt, jid_full(scan->jid), jid_full(pkt->from)), scan);
                                                       ^~~~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_offline.c:141:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        ret = storage_count(user->sm->st, "queue", jid_user(user->jid), NULL, &queuesize);
                                                   ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:227:82: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_count(storage_t st, const char *type, const char *owner, const char *filter, int *count);
                                                                                 ^
mod_offline.c:164:36: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_delay(pkt, time(NULL), user->jid->domain);
                                   ^~~~~~~~~~~~~~~~~
./sm.h:305:67: note: passing argument to parameter 'from' here
SM_API void            pkt_delay(pkt_t pkt, time_t t, const char *from);
                                                                  ^
mod_offline.c:173:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        switch(storage_put(user->sm->st, "queue", jid_user(user->jid), os)) {
                                                  ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:221:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_put(storage_t st, const char *type, const char *owner, os_t os);
                                                                               ^
mod_offline.c:193:67: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    event = pkt_create(user->sm, "message", NULL, jid_full(pkt->from), jid_full(pkt->to));
                                                                  ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_offline.c:193:88: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    event = pkt_create(user->sm, "message", NULL, jid_full(pkt->from), jid_full(pkt->to));
                                                                                       ^~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_offline.c:231:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(mi->mod->mm->sm->st, "queue", jid_user(jid), NULL, &os) == st_SUCCESS) {
                                                 ^~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_offline.c:272:41: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "queue", jid_user(jid), NULL);
                                        ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_offline.c:290:15: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    configval = config_get_one(mod->mm->sm->config, "offline.dropmessages", 0);
              ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_offline.c:294:15: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    configval = config_get_one(mod->mm->sm->config, "offline.storeheadlines", 0);
              ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_offline.c:298:15: warning: assigning to 'char *' from 'const char *' discards qualifiers [-Wincompatible-pointer-types-discards-qualifiers]
    configval = config_get_one(mod->mm->sm->config, "offline.dropsubscriptions", 0);
              ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
14 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_offline.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_offline.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_pep.lo mod_pep.c
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_pep.c:44:79: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                              ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_pep.c:44:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(pkt->to != NULL && jid_compare_user(sess->jid, pkt->to) != 0 && strcmp(sess->jid->domain, jid_user(pkt->to)) != 0)
                                                                                                 ^~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_pep.c:56:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                         ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_pep.c:56:111: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(!(pkt->type & pkt_IQ) || pkt->ns != ns_DISCO_INFO || (pkt->from != NULL && strcmp(jid_user(sess->jid), jid_full(pkt->from))))
                                                                                                              ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
24 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_pep.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_pep.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_presence.lo mod_presence.c
mod_presence.c:42:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(pkt->nad, 1, -1, "from", jid_full(pkt->from), 0);
                                              ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_presence.c:67:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    user = xhash_get(mi->mod->mm->sm->users, jid_user(pkt->to));
                                             ^~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_presence.c:97:33: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess = sess_match(user, pkt->to->resource);
                                ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_presence.c:116:33: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess = sess_match(user, pkt->to->resource);
                                ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_presence.c:149:70: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "subscribed", jid_user(pkt->from), jid_user(smjid)));
                                                                     ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_presence.c:149:91: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "subscribed", jid_user(pkt->from), jid_user(smjid)));
                                                                                          ^~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_presence.c:152:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "subscribe", jid_user(pkt->from), jid_user(smjid)));
                                                                    ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_presence.c:152:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "subscribe", jid_user(pkt->from), jid_user(smjid)));
                                                                                         ^~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_presence.c:164:72: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "unsubscribed", jid_user(pkt->from), jid_user(smjid)));
                                                                       ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_presence.c:164:93: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(mod->mm->sm, "presence", "unsubscribed", jid_user(pkt->from), jid_user(smjid)));
                                                                                            ^~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
10 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_presence.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_presence.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_privacy.lo mod_privacy.c
mod_privacy.c:149:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(user->sm->st, "privacy-items", jid_user(user->jid), NULL, &os) == st_SUCCESS) {
                                                  ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_privacy.c:207:50: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                            zitem->jid = jid_new(str, strlen(str));
                                                 ^~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_privacy.c:297:53: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(user->sm->st, "privacy-default", jid_user(user->jid), NULL, &os) == st_SUCCESS) {
                                                    ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_privacy.c:338:25: warning: passing 'unsigned char [2048]' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                sprintf(domres, "%s/%s", jid->domain, jid->resource);
                        ^~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:38:28: note: expanded from macro 'sprintf'
  __builtin___sprintf_chk (str, __USE_FORTIFY_LEVEL - 1, __bos (str), \
                           ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_privacy.c:342:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_privacy.c:342:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid_user(jid)) == 0 ||
                                               ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_privacy.c:343:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_privacy.c:343:48: warning: passing 'unsigned char [2048]' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), domres) == 0 ||
                                               ^~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:40: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                       ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:803:74: note: expanded from macro 'strcmp'
      && (__s1_len = __builtin_strlen (s1), __s2_len = __builtin_strlen (s2), \
                                                                         ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:27: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                          ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:806:31: note: expanded from macro 'strcmp'
      ? __builtin_strcmp (s1, s2)                                             \
                              ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:808:36: note: expanded from macro 'strcmp'
         && (__s1_len = __builtin_strlen (s1), __s1_len < 4)                  \
                                          ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:26: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:810:30: note: expanded from macro 'strcmp'
            ? __builtin_strcmp (s1, s2)                                       \
                                    ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:813:39: note: expanded from macro 'strcmp'
            && (__s2_len = __builtin_strlen (s2), __s2_len < 4)               \
                                             ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:29: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                   ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:815:33: note: expanded from macro 'strcmp'
               ? __builtin_strcmp (s1, s2)                                    \
                                       ^
mod_privacy.c:344:27: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                          ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:26: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                ^
mod_privacy.c:344:48: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                   strcmp(jid_full(scan->jid), jid->domain) == 0)
                                               ^~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/string2.h:817:30: note: expanded from macro 'strcmp'
            : __builtin_strcmp (s1, s2)))); })
                                    ^
mod_privacy.c:351:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ritem = xhash_get(user->roster, jid_full(jid));
                                                ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:352:67: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(ritem == NULL) ritem = xhash_get(user->roster, jid_user(jid));
                                                                  ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:353:67: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(ritem == NULL) ritem = xhash_get(user->roster, jid->domain);
                                                                  ^~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:365:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ritem = xhash_get(user->roster, jid_full(jid));
                                                ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:366:67: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(ritem == NULL) ritem = xhash_get(user->roster, jid_user(jid));
                                                                  ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:367:67: warning: passing 'unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                if(ritem == NULL) ritem = xhash_get(user->roster, jid->domain);
                                                                  ^~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_privacy.c:428:33: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess = sess_match(user, pkt->to->resource);
                                ^~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_privacy.c:487:33: warning: passing 'unsigned char *' to parameter of type 'char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        sess = sess_match(user, pkt->from->resource);
                                ^~~~~~~~~~~~~~~~~~~
./sm.h:321:54: note: passing argument to parameter 'resource' here
SM_API sess_t          sess_match(user_t user, char *resource);
                                                     ^
mod_privacy.c:545:59: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                nad_set_attr(pkt->nad, item, -1, "value", jid_full(zitem->jid), 0);
                                                          ^~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_privacy.c:632:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                        strlen(urn_BLOCKING), urn_BLOCKING, strlen(jid_full(scan->jid)), jid_full(scan->jid));
                                                                                   ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:39:7: note: expanded from macro 'sprintf'
                           __VA_ARGS__)
                           ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_privacy.c:633:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            storage_delete(st, "privacy-items", jid_user(user->jid), filter);
                                                ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_privacy.c:652:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_dup(sscan->pres, jid_full(notify_jid), jid_full(sscan->jid)));
                                                ^~~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_privacy.c:652:71: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_dup(sscan->pres, jid_full(notify_jid), jid_full(sscan->jid)));
                                                                      ^~~~~~~~~~~~~~~~~~~~
./sm.h:299:71: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                                      ^
mod_privacy.c:712:70: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    storage_delete(mod->mm->sm->st, "privacy-items", jid_user(sess->user->jid), filter);
                                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_privacy.c:729:75: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                ret = storage_replace(mod->mm->sm->st, "privacy-default", jid_user(sess->user->jid), NULL, os);
                                                                          ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_privacy.c:764:32: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                jidt = jid_new(NAD_AVAL(pkt->nad, jid), NAD_AVAL_L(pkt->nad, jid));
                               ^~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_privacy.c:787:98: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                pkt_router(pkt_create(sess->user->sm, "presence", "unavailable", jid_full(jidt), jid_full(sscan->jid)));
                                                                                                 ^~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_privacy.c:787:114: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                                pkt_router(pkt_create(sess->user->sm, "presence", "unavailable", jid_full(jidt), jid_full(sscan->jid)));
                                                                                                                 ^~~~~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_privacy.c:794:46: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        zitem->jid = jid_new(NAD_AVAL(pkt->nad, jid), NAD_AVAL_L(pkt->nad, jid));
                                             ^~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_privacy.c:818:77: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        ret = storage_put(mod->mm->sm->st, "privacy-items", jid_user(sess->user->jid), os);
                                                                            ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:221:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_put(storage_t st, const char *type, const char *owner, os_t os);
                                                                               ^
mod_privacy.c:860:43: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    result = pkt_dup(pkt, jid_full(sscan->jid), NULL);
                                          ^~~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_privacy.c:895:64: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    nad_set_attr(result->nad, item, -1, "jid", jid_full(zitem->jid), 0);
                                                               ^~~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_privacy.c:984:46: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        zitem->jid = jid_new(NAD_AVAL(pkt->nad, value), NAD_AVAL_L(pkt->nad, value));
                                             ^~~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_privacy.c:1119:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            ret = storage_replace(mod->mm->sm->st, "privacy-items", jid_user(sess->user->jid), filter, os);
                                                                    ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_privacy.c:1162:76: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        storage_delete(mod->mm->sm->st, "privacy-default", jid_user(sess->user->jid), NULL);
                                                                           ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_privacy.c:1172:77: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        storage_replace(mod->mm->sm->st, "privacy-default", jid_user(sess->user->jid), NULL, os);
                                                                            ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_privacy.c:1233:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                storage_replace(mod->mm->sm->st, "privacy-default", jid_user(sess->user->jid), NULL, os);
                                                                    ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_privacy.c:1314:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "privacy-items", jid_user(jid), NULL);
                                                ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_privacy.c:1315:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "privacy-default", jid_user(jid), NULL);
                                                  ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
69 warnings generated.
/bin/bash ../libtool --quiet  --tag=CC   --mode=link gcc  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -module -export-dynamic -fPIE -pie -Wl,-z,relro -Wl,-z,now -o mod_privacy.la -rpath /usr/lib/x86_64-linux-gnu/jabberd2 mod_privacy.lo ../subst/libsubst.la -lssl -lcrypto -lgsasl -ludns -lidn -lexpat -lresolv -lcrypt  -ldl -lz
/bin/bash ../libtool --quiet  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2  -g -O2 -fPIE -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -funsigned-char -c -o mod_roster.lo mod_roster.c
mod_roster.c:93:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    snprintf(filter, 4096, "(jid=%zu:%s)", strlen(jid_full(item->jid)), jid_full(item->jid));
                                                  ^~~~~~~~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:70:8: note: expanded from macro 'snprintf'
                            __VA_ARGS__)
                            ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_roster.c:95:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_replace(user->sm->st, "roster-items", jid_user(user->jid), filter, os);
                                                  ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_roster.c:100:55: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        storage_delete(user->sm->st, "roster-groups", jid_user(user->jid), filter);
                                                      ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_roster.c:113:52: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_replace(user->sm->st, "roster-groups", jid_user(user->jid), filter, os);
                                                   ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:231:84: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_replace(storage_t st, const char *type, const char *owner, const char *filter, os_t os);
                                                                                   ^
mod_roster.c:126:45: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_set_attr(pkt->nad, elem, -1, "jid", jid_full(item->jid), 0);
                                            ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_roster.c:165:29: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        push = pkt_dup(pkt, jid_full(scan->jid), NULL);
                            ^~~~~~~~~~~~~~~~~~~
./sm.h:299:55: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_dup(pkt_t pkt, const char *to, const char *from);
                                                      ^
mod_roster.c:193:43: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    nad_set_attr(pkt->nad, 1, -1, "from", jid_full(pkt->from), 0);
                                          ^~~~~~~~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_roster.c:196:42: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    item = xhash_get(sess->user->roster, jid_full(pkt->to));
                                         ^~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_roster.c:206:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            ret = storage_count(sess->user->sm->st, "roster-items", jid_user(sess->user->jid), NULL, &items);
                                                                    ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:227:82: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_count(storage_t st, const char *type, const char *owner, const char *filter, int *count);
                                                                                 ^
mod_roster.c:221:39: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_put(sess->user->roster, jid_full(item->jid), (void *) item);
                                      ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
mod_roster.c:246:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (sm_storage_rate_limit(sess->user->sm, jid_user(sess->user->jid)))
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_roster.c:322:19: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    jid = jid_new(NAD_AVAL(pkt->nad, attr), NAD_AVAL_L(pkt->nad, attr));
                  ^~~~~~~~~~~~~~~~~~~~~~~~
../util/nad.h:189:23: note: expanded from macro 'NAD_AVAL'
#define NAD_AVAL(N,A) (N->cdata + N->attrs[A].ival)
                      ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_roster.c:332:46: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        item = xhash_get(sess->user->roster, jid_full(jid));
                                             ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_roster.c:338:83: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_create(sess->user->sm, "presence", "unsubscribed", jid_user(item->jid), jid_user(sess->jid)));
                                                                                  ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_roster.c:338:104: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_create(sess->user->sm, "presence", "unsubscribed", jid_user(item->jid), jid_user(sess->jid)));
                                                                                                       ^~~~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_roster.c:345:82: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_create(sess->user->sm, "presence", "unsubscribe", jid_user(item->jid), jid_user(sess->jid)));
                                                                                 ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_roster.c:345:103: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                pkt_router(pkt_create(sess->user->sm, "presence", "unsubscribe", jid_user(item->jid), jid_user(sess->jid)));
                                                                                                      ^~~~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_roster.c:353:43: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            xhash_zap(sess->user->roster, jid_full(jid));
                                          ^~~~~~~~~~~~~
../util/xhash.h:63:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_zap(xht h, const char *key);
                                               ^
mod_roster.c:354:74: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            _roster_freeuser_walker((const char *) jid_full(jid), strlen(jid_full(jid)), (void *) item, NULL);
                                                                         ^~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_roster.c:356:59: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            snprintf(filter, 4096, "(jid=%zu:%s)", strlen(jid_full(jid)), jid_full(jid));
                                                          ^~~~~~~~~~~~~
/usr/include/x86_64-linux-gnu/bits/stdio2.h:70:8: note: expanded from macro 'snprintf'
                            __VA_ARGS__)
                            ^
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_roster.c:357:64: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            storage_delete(sess->user->sm->st, "roster-items", jid_user(sess->jid), filter);
                                                               ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_roster.c:358:65: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            storage_delete(sess->user->sm->st, "roster-groups", jid_user(sess->jid), filter);
                                                                ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_roster.c:370:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        nad_set_attr(push->nad, elem, -1, "jid", jid_full(jid), 0);
                                                 ^~~~~~~~~~~~~
../util/nad.h:143:91: note: passing argument to parameter 'val' here
JABBERD2_API void nad_set_attr(nad_t nad, int elem, int ns, const char *name, const char *val, int vallen);
                                                                                          ^
mod_roster.c:385:42: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    item = xhash_get(sess->user->roster, jid_full(jid));
                                         ^~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_roster.c:390:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
            ret = storage_count(sess->user->sm->st, "roster-items", jid_user(sess->user->jid), NULL, &items);
                                                                    ^~~~~~~~~~~~~~~~~~~~~~~~~
../storage/storage.h:227:82: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_count(storage_t st, const char *type, const char *owner, const char *filter, int *count);
                                                                                 ^
mod_roster.c:406:39: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        xhash_put(sess->user->roster, jid_full(item->jid), (void *) item);
                                      ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
mod_roster.c:462:47: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if (sm_storage_rate_limit(sess->user->sm, jid_user(sess->user->jid)))
                                              ^~~~~~~~~~~~~~~~~~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_roster.c:463:9: error: void function '_roster_set_item' should not return a value [-Wreturn-type]
        return -stanza_err_RESOURCE_CONSTRAINT;
        ^      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mod_roster.c:616:45: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    item = (item_t) xhash_get(user->roster, jid_full(pkt->from));
                                            ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_roster.c:689:69: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(user->sm, "presence", "unsubscribed", jid_user(pkt->from), jid_user(user->jid)));
                                                                    ^~~~~~~~~~~~~~~~~~~
./sm.h:302:92: note: passing argument to parameter 'to' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                           ^
mod_roster.c:689:90: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
        pkt_router(pkt_create(user->sm, "presence", "unsubscribed", jid_user(pkt->from), jid_user(user->jid)));
                                                                                         ^~~~~~~~~~~~~~~~~~~
./sm.h:302:108: note: passing argument to parameter 'from' here
SM_API pkt_t           pkt_create(sm_t sm, const char *elem, const char *type, const char *to, const char *from);
                                                                                                           ^
mod_roster.c:710:41: warning: incompatible pointer types passing 'jid_t' (aka 'struct jid_st *') to parameter of type 'const char *' [-Wincompatible-pointer-types]
    if (sm_storage_rate_limit(user->sm, pkt->from))
                                        ^~~~~~~~~
./sm.h:293:67: note: passing argument to parameter 'owner' here
SM_API int             sm_storage_rate_limit(sm_t sm, const char *owner);
                                                                  ^
mod_roster.c:749:50: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(user->sm->st, "roster-items", jid_user(user->jid), NULL, &os) == st_SUCCESS) {
                                                 ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_roster.c:758:41: warning: passing 'char *' to parameter of type 'const unsigned char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                    item->jid = jid_new(str, -1);
                                        ^~~
../util/jid.h:80:63: note: passing argument to parameter 'id' here
JABBERD2_API jid_t               jid_new(const unsigned char *id, int len);
                                                              ^
mod_roster.c:772:59: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        olditem = xhash_get(user->roster, jid_full(item->jid));
                                                          ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:61:49: note: passing argument to parameter 'key' here
JABBERD2_API void *xhash_get(xht h, const char *key);
                                                ^
mod_roster.c:775:53: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                            xhash_zap(user->roster, jid_full(item->jid));
                                                    ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:63:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_zap(xht h, const char *key);
                                               ^
mod_roster.c:776:81: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                            _roster_freeuser_walker(jid_full(item->jid), strlen(jid_full(item->jid)), (void *) olditem, NULL);
                                                                                ^~~~~~~~~~~~~~~~~~~
/usr/include/string.h:395:35: note: passing argument to parameter '__s' here
extern size_t strlen (const char *__s)
                                  ^
mod_roster.c:776:53: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                            _roster_freeuser_walker(jid_full(item->jid), strlen(jid_full(item->jid)), (void *) olditem, NULL);
                                                    ^~~~~~~~~~~~~~~~~~~
mod_roster.c:42:49: note: passing argument to parameter 'key' here
static void _roster_freeuser_walker(const char *key, int keylen, void *val, void *arg)
                                                ^
mod_roster.c:780:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
                        xhash_put(user->roster, jid_full(item->jid), (void *) item);
                                                ^~~~~~~~~~~~~~~~~~~
../util/xhash.h:59:48: note: passing argument to parameter 'key' here
JABBERD2_API void xhash_put(xht h, const char *key, void *val);
                                               ^
mod_roster.c:792:51: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    if(storage_get(user->sm->st, "roster-groups", jid_user(user->jid), NULL, &os) == st_SUCCESS) {
                                                  ^~~~~~~~~~~~~~~~~~~
../storage/storage.h:223:80: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_get(storage_t st, const char *type, const char *owner, const char *filter, os_t *os);
                                                                               ^
mod_roster.c:821:48: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "roster-items", jid_user(jid), NULL);
                                               ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
mod_roster.c:822:49: warning: passing 'const unsigned char *' to parameter of type 'const char *' converts between pointers to integer types with different sign [-Wpointer-sign]
    storage_delete(mi->sm->st, "roster-groups", jid_user(jid), NULL);
                                                ^~~~~~~~~~~~~
../storage/storage.h:229:83: note: passing argument to parameter 'owner' here
ST_API st_ret_t        storage_delete(storage_t st, const char *type, const char *owner, const char *filter);
                                                                                  ^
41 warnings and 1 error generated.
make[3]: *** [mod_roster.lo] Error 1
make[3]: Leaving directory `/«PKGBUILDDIR»/sm'
make[2]: *** [all-recursive] Error 1
make[1]: *** [all] Error 2
dh_auto_build: make -j1 returned exit code 2
make[2]: Leaving directory `/«PKGBUILDDIR»'
make[1]: Leaving directory `/«PKGBUILDDIR»'
make: *** [build] Error 2
dpkg-buildpackage: error: debian/rules build gave error exit status 2
────────────────────────────────────────────────────────────────────────────────
Build finished at 20140326-2119

Finished
────────

E: Build failure (dpkg-buildpackage died)

┌──────────────────────────────────────────────────────────────────────────────┐
│ Cleanup                                                                      │
└──────────────────────────────────────────────────────────────────────────────┘

Not cleaning session: cloned chroot in use

┌──────────────────────────────────────────────────────────────────────────────┐
│ Summary                                                                      │
└──────────────────────────────────────────────────────────────────────────────┘

Build Architecture: amd64
Build-Space: 34076
Build-Time: 34
Distribution: sid
Fail-Stage: build
Host Architecture: amd64
Install-Time: 14
Job: jabberd2_2.2.17-1.dsc
Machine Architecture: amd64
Package: jabberd2
Package-Time: 55
Source-Version: 2.2.17-1
Space: 34076
Status: attempted
Version: 2.2.17-1
────────────────────────────────────────────────────────────────────────────────
Finished at 20140326-2119
Build needed 00:00:55, 34076k disc space
